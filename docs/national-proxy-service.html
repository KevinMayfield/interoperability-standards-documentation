<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>National Proxy Service - Interoperability Standards - Skunkworks v0.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>


      <!-- <script src="assets/nhsuk.js" defer></script> -->

      <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->
  <!-- Project extras
<link
        type="font/woff2"
        href="assets/fonts/FrutigerLTW01-55Roman.woff2"
        rel="preload"
        as="font"
        crossorigin
/>
<link
        type="font/woff2"
        href="assets/fonts/FrutigerLTW01-65Bold.woff2"
        rel="preload"
        as="font"
        crossorigin
/>
<link href="assets/css/nhsuk.css" rel="stylesheet" /> -->

  <!-- Bootstrap core CSS overrides to bootstrap-fhir.css -->
<link rel="stylesheet" href="assets/css/nhse.css"/>



    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="fhir-logo" href="assets/ico/icon-fhir-144.png"/>
    <link sizes="114x114" rel="fhir-logo" href="assets/ico/icon-fhir-114.png"/>
    <link sizes="72x72" rel="fhir-logo" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/favicons/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"14"}
    h3,h4,h5,h6{--heading-prefix:"14"}</style>
    <div id="segment-header" class="segment nhsuk-header">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->

  <!-- Left logo - typically the publisher's logo - project or affiliate -->
        <div id="project-nav">
          <a no-external="true" id="project-logo" href="https://www.england.nhs.uk">
            <img src="assets/images/skunk.png" alt="Project home" height="61"/>
          </a>
        </div>

  <!-- Right logo - for example the FHIR logo -->
  <!-- Make sure you have authorization to use the FHIR logo -->

        <div id="family-nav">
              <!-- <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="60" alt="FHIR website" src="assets/images/fhir-logo-www.png"/> </a> -->
        </div> 
      

  <!-- search icon - if you want -->
  <!-- <div id="hl7-search">
          <a id="hl7-search-lnk" no-external="true" href="http://hl7.org/fhir/search.cfm"><img alt="Search FHIR" src="assets/images/search.png"/></a>
        </div> -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Interoperability Standards - Skunkworks</span>
            <br/>
            <span style="display:inline-block;">0.0.1 - ci-build



   <img src="assets/images/GB-ENG.svg" alt="England flag" title="England" height="16"/>


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="toc.html">Table of Contents</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Documentation
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="background.html">Background</a>
      </li>
      <li>
        <a href="interoperability-standards.html">Interoperability Standards</a>
      </li>
      <li>
        <a href="testing.html">Conformance and Testing (FHIR)</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Design
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="administration-module.html">Administration</a>
      </li>
      <li>
        <a href="documents-module.html">Documents (Clinical)</a>
      </li>
      <li>
        <a href="clinical-module.html">Clinical</a>
      </li>
      <li>
        <a href="diagnostics-module.html">Diagnostics</a>
      </li>
      <li>
        <a href="medications-module.html">Medications</a>
      </li>
      <li>
        <a href="workflow.html">Workflow</a>
      </li>
      <li>
        <a href="structured-data-capture.html">Structured Data Capture</a>
      </li>
      <li>
        <a href="validation.html">FHIR Validation</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Build
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="national-proxy-service.html">National Proxy Service</a>
      </li>
      <li>
        <a href="personal-demographics-service.html">Personal Demographics Service</a>
      </li>
      <li>
        <a href="multicast-notification-service.html">Multicast Notification Service</a>
      </li>
      <li>
        <a href="booking.html">Booking</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">FHIR Assets</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
    </ul>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>National Proxy Service</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Interoperability Standards - Skunkworks - Local Development build (v0.0.1) built by the FHIR (HL7&reg; FHIR&reg; Standard) Build Tools. See the <a href="https://fhir.nhs.uk/England/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>National Proxy Service</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#enterprise-architecture-and-system-architecture-links" id="markdown-toc-enterprise-architecture-and-system-architecture-links">Enterprise Architecture and System Architecture Links</a></li>
  <li><a href="#entity-relationship-diagram" id="markdown-toc-entity-relationship-diagram">Entity Relationship Diagram</a></li>
  <li><a href="#create-a-relationship" id="markdown-toc-create-a-relationship">Create a relationship</a></li>
  <li><a href="#validate-a-relationship" id="markdown-toc-validate-a-relationship">Validate a relationship</a></li>
  <li><a href="#view-a-relationship" id="markdown-toc-view-a-relationship">View a relationship</a></li>
  <li><a href="#manage-the-lifecycle-of-a-relationship" id="markdown-toc-manage-the-lifecycle-of-a-relationship">Manage the lifecycle of a relationship</a></li>
  <li><a href="#revoke-a-relationship" id="markdown-toc-revoke-a-relationship">Revoke a relationship</a></li>
  <li><a href="#api-documentation-capabilitystatement" id="markdown-toc-api-documentation-capabilitystatement">API Documentation (CapabilityStatement)</a></li>
</ul>

</div>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Overview">Internal Confluence Page</a></p>

<h3 id="overview">Overview</h3>

<div>
<img src="National-Proxy-Process-Overview.png" alt="National Proxy Overview" width="60%"/>
<p>Figure 1 - National Proxy Overview</p>
<p></p>
</div>

<h3 id="enterprise-architecture-and-system-architecture-links">Enterprise Architecture and System Architecture Links</h3>

<p>It is believed this service contains <a href="https://profiles.ihe.net/ITI/PCF/index.html">IHE Privacy Consent on FHIR (PCF)</a>, it is the first known service in this category. Links to this IHE Profile will be identified in the relevant sections below. 
This section is similar (but not same) <a href="https://profiles.ihe.net/ITI/PCF/content.html#3584-advanced">advanced consent</a><br/>
So this would apply to NHS England Services following <a href="https://wiki.ihe.net/index.php/Mobile_Health_Document_Sharing_(MHDS)">IHE Mobile Health Document Sharing (MHDS)</a>. Systems identified in this category are:</p>

<p><a href="https://digital.nhs.uk/developer/api-catalogue/national-record-locator-fhir/v3/producer">National Record Locator</a></p>

<p>It also uses <a href="https://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir">Personal Demographics Service</a> and shares a similar `RelatedPerson’ API.</p>

<h3 id="entity-relationship-diagram">Entity Relationship Diagram</h3>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 2214 826" zoomAndPan="magnify" preserveAspectRatio="none" width="2214px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:2214px;height:826px;background:#FFFFFF;" version="1.1" height="826px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="1019.75" font-size="14" textLength="161" y="23.5352" font-family="sans-serif" fill="#000000">National Proxy Service</text><g id="elem_Consent"><rect width="792" x="1017" y="265.3883" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="242.8359"/><text lengthAdjust="spacing" x="1384.5" font-size="14" textLength="57" y="280.9234" font-family="sans-serif" fill="#000000">Consent</text><line y1="285.8766" x1="1018" y2="285.8766" style="stroke:#181818;stroke-width:0.5;" x2="1808"/><ellipse cx="1028" cy="299.6207" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="235" y="303.4117" font-family="sans-serif" fill="#000000">status: proposed | active | rejected</text><ellipse cx="1028" cy="316.109" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="79" y="319.9" font-family="sans-serif" fill="#000000">scope : TBD</text><ellipse cx="1028" cy="332.5973" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="281" y="336.3883" font-family="sans-serif" fill="#000000">category: code to represent Proxy Access</text><ellipse cx="1028" cy="349.0855" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="201" y="352.8766" font-family="sans-serif" fill="#000000">policy.uri: link to permissions</text><ellipse cx="1028" cy="365.5738" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="343" y="369.3648" font-family="sans-serif" fill="#000000">policyRule: code to represent type of Proxy Access</text><ellipse cx="1028" cy="382.0621" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="179" y="385.8531" font-family="sans-serif" fill="#000000">dateTime: Data of consent</text><ellipse cx="1028" cy="398.5504" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="494" y="402.3414" font-family="sans-serif" fill="#000000">patient.identifier: NHSNumber of the subject of the proxy access request</text><ellipse cx="1028" cy="415.0387" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="295" y="418.8297" font-family="sans-serif" fill="#000000">performer: who agreed to the proxy access</text><ellipse cx="1028" cy="431.527" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="367" y="435.318" font-family="sans-serif" fill="#000000">organization: custodian of the consent, NHS England?</text><ellipse cx="1028" cy="448.0152" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="556" y="451.8063" font-family="sans-serif" fill="#000000">source: proxy access request form (ProxyAccessRequest:QuestionnaireResponse)</text><ellipse cx="1028" cy="464.5035" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="150" y="468.2945" font-family="sans-serif" fill="#000000">provision.type: permit</text><text lengthAdjust="spacing" x="1037" font-size="14" textLength="595" y="484.7828" font-family="sans-serif" fill="#000000">provision.period: timeframe this proxy request is valid (and then needs to be reviewed)</text><ellipse cx="1028" cy="497.4801" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1037" font-size="14" textLength="766" y="501.2711" font-family="sans-serif" fill="#000000">provision.actor.reference.identifier: NHSNumber of the person making the proxy access request (RelatedPerson)</text></g><g id="elem_RelatedPerson"><rect width="674" x="213" y="585.7183" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="110.9297"/><text lengthAdjust="spacing" x="501" font-size="14" textLength="98" y="601.2534" font-family="sans-serif" fill="#000000">RelatedPerson</text><line y1="606.2066" x1="214" y2="606.2066" style="stroke:#181818;stroke-width:0.5;" x2="886"/><ellipse cx="224" cy="619.9507" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="233" font-size="14" textLength="494" y="623.7417" font-family="sans-serif" fill="#000000">patient.identifier: NHSNumber of the subject of the proxy access request</text><text lengthAdjust="spacing" x="233" font-size="14" textLength="461" y="640.23" font-family="sans-serif" fill="#000000">name: may be useful to prevent call to PDS just to retrieve the name</text><ellipse cx="224" cy="652.9273" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="233" font-size="14" textLength="486" y="656.7183" font-family="sans-serif" fill="#000000">identifier : NHS Number of the person making the proxy access request</text><ellipse cx="224" cy="669.4155" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="233" font-size="14" textLength="217" y="673.2066" font-family="sans-serif" fill="#000000">relationship: mother, father, etc</text><text lengthAdjust="spacing" x="233" font-size="14" textLength="648" y="689.6948" font-family="sans-serif" fill="#000000">extension.consent: Proxy Acccess Request - should not be present when no consent is present</text></g><g id="elem_Patient"><rect width="183" x="458.5" y="774.1283" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="44.9766"/><text lengthAdjust="spacing" x="526.5" font-size="14" textLength="47" y="789.6634" font-family="sans-serif" fill="#000000">Patient</text><line y1="794.6166" x1="459.5" y2="794.6166" style="stroke:#181818;stroke-width:0.5;" x2="640.5"/><ellipse cx="469.5" cy="808.3607" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="478.5" font-size="14" textLength="157" y="812.1517" font-family="sans-serif" fill="#000000">identifier : NHSNumber</text></g><g id="elem_p1"><rect width="179" x="184.5" y="774.1283" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="44.9766"/><text lengthAdjust="spacing" x="199.5" font-size="14" textLength="149" y="789.6634" font-family="sans-serif" fill="#000000">RelatedPerson:Patient</text><line y1="794.6166" x1="185.5" y2="794.6166" style="stroke:#181818;stroke-width:0.5;" x2="362.5"/><ellipse cx="195.5" cy="808.3607" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="204.5" font-size="14" textLength="153" y="812.1517" font-family="sans-serif" fill="#000000">identifier: NHSNumber</text></g><g id="elem_task1"><rect width="484" x="1171" y="44.4883" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="143.9063"/><text lengthAdjust="spacing" x="1290.5" font-size="14" textLength="245" y="60.0234" font-family="sans-serif" fill="#000000">ProxyAccessRequestValidation:Task</text><line y1="64.9766" x1="1172" y2="64.9766" style="stroke:#181818;stroke-width:0.5;" x2="1654"/><text lengthAdjust="spacing" x="1191" font-size="14" textLength="310" y="82.5117" font-family="sans-serif" fill="#000000">use _history for a record of the conversations</text><ellipse cx="1182" cy="95.209" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1191" font-size="14" textLength="102" y="99" font-family="sans-serif" fill="#000000">focus: Consent</text><ellipse cx="1182" cy="111.6973" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1191" font-size="14" textLength="162" y="115.4883" font-family="sans-serif" fill="#000000">requester: NHS England</text><ellipse cx="1182" cy="128.1855" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1191" font-size="14" textLength="393" y="131.9766" font-family="sans-serif" fill="#000000">owner: GP, etc who needs to validate the Consent request</text><ellipse cx="1182" cy="144.6738" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1191" font-size="14" textLength="327" y="148.4648" font-family="sans-serif" fill="#000000">code: 'validation' of Consent request (code TBD)</text><ellipse cx="1182" cy="161.1621" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1191" font-size="14" textLength="458" y="164.9531" font-family="sans-serif" fill="#000000">for: can add NHSNumber of the subject of the proxy access request</text><text lengthAdjust="spacing" x="1191" font-size="14" textLength="372" y="181.4414" font-family="sans-serif" fill="#000000">note: use this for communication, i.e. the conversation</text></g><g id="elem_qr1"><rect width="439" x="921.5" y="618.6883" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="44.9766"/><text lengthAdjust="spacing" x="987.5" font-size="14" textLength="307" y="634.2234" font-family="sans-serif" fill="#000000">ProxyAccessRequest:QuestionnaireResponse</text><line y1="639.1766" x1="922.5" y2="639.1766" style="stroke:#181818;stroke-width:0.5;" x2="1359.5"/><ellipse cx="932.5" cy="652.9207" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="941.5" font-size="14" textLength="413" y="656.7117" font-family="sans-serif" fill="#000000">questionnaire: url of the ProxyAccessRequestFormDefinition</text></g><g id="elem_q1"><rect width="363" x="618.5" y="364.3183" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="44.9766"/><text lengthAdjust="spacing" x="628" font-size="14" textLength="344" y="379.8534" font-family="sans-serif" fill="#000000">ProxyAccessRequestFormDefinition:Questionnaire</text><line y1="384.8066" x1="619.5" y2="384.8066" style="stroke:#181818;stroke-width:0.5;" x2="980.5"/><ellipse cx="629.5" cy="398.5507" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="638.5" font-size="14" textLength="337" y="402.3417" font-family="sans-serif" fill="#000000">url: url of the ProxyAccessRequestFormDefinition</text></g><g id="elem_permissionDefinition"><rect width="363" x="1844.5" y="339.5883" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="94.4414"/><text lengthAdjust="spacing" x="1904.5" font-size="14" textLength="243" y="355.1234" font-family="sans-serif" fill="#000000">PermissionDefinition:Questionnaire</text><line y1="360.0766" x1="1845.5" y2="360.0766" style="stroke:#181818;stroke-width:0.5;" x2="2206.5"/><ellipse cx="1855.5" cy="373.8207" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1864.5" font-size="14" textLength="337" y="377.6117" font-family="sans-serif" fill="#000000">url: url of the ProxyAccessRequestFormDefinition</text><text lengthAdjust="spacing" x="1864.5" font-size="14" textLength="106" y="394.1" font-family="sans-serif" fill="#000000">item : provision</text><text lengthAdjust="spacing" x="1864.5" font-size="14" textLength="101" y="410.5883" font-family="sans-serif" fill="#000000">item.item: type</text><text lengthAdjust="spacing" x="1864.5" font-size="14" textLength="114" y="427.0766" font-family="sans-serif" fill="#000000">item.item: action</text></g><g id="elem_permission"><rect width="439" x="1653.5" y="569.2283" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="143.9063"/><text lengthAdjust="spacing" x="1752" font-size="14" textLength="242" y="584.7634" font-family="sans-serif" fill="#000000">Permission:QuestionnaireResponse</text><line y1="589.7166" x1="1654.5" y2="589.7166" style="stroke:#181818;stroke-width:0.5;" x2="2091.5"/><ellipse cx="1664.5" cy="603.4607" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="413" y="607.2517" font-family="sans-serif" fill="#000000">questionnaire: url of the ProxyAccessRequestFormDefinition</text><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="106" y="623.74" font-family="sans-serif" fill="#000000">item : provision</text><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="91" y="640.2283" font-family="sans-serif" fill="#000000">item.answer :</text><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="101" y="656.7166" font-family="sans-serif" fill="#000000">item.item: type</text><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="87" y="673.2048" font-family="sans-serif" fill="#000000">item.answer:</text><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="114" y="689.6931" font-family="sans-serif" fill="#000000">item.item: action</text><text lengthAdjust="spacing" x="1673.5" font-size="14" textLength="87" y="706.1814" font-family="sans-serif" fill="#000000">item.answer:</text></g><g id="elem_PDSOverlap"><path d="M219,374.1483 L219,399.4588 A0,0 0 0 0 219,399.4588 L403.99,399.4588 L517.57,585.2483 L411.99,399.4588 L583,399.4588 A0,0 0 0 0 583,399.4588 L583,384.1483 L573,374.1483 L219,374.1483 A0,0 0 0 0 219,374.1483 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M573,374.1483 L573,384.1483 L583,384.1483 L573,374.1483 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="225" font-size="13" textLength="343" y="391.7166" font-family="sans-serif" fill="#000000">This is essentially the same as PDS but with a Consent</text></g><g id="elem_PDS"><path d="M6,628.5283 L6,653.8388 L178,653.8388 L178,638.5283 L168,628.5283 L6,628.5283 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M168,628.5283 L168,638.5283 L178,638.5283 L168,628.5283 " style="stroke:#181818;stroke-width:1.0;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="12" font-size="13" textLength="151" y="646.0966" font-family="sans-serif" fill="#000000">This is retrieved via PDS</text></g>  <!-- link Consent to RelatedPerson --><g id="link_Consent_RelatedPerson"><path codeLine="73" d="M996.03,509.7383 C913.49,533.8783 830.23,558.2283 758.36,579.2483 " style="stroke:#181818;stroke-width:1.0;" id="Consent-RelatedPerson" fill="none"/><line y1="501.4527" x1="1010.1276" y2="509.1307" style="stroke:#181818;stroke-width:1.0;" x2="1012.3744"/><line y1="502.2952" x1="1007.2483" y2="509.9732" style="stroke:#181818;stroke-width:1.0;" x2="1009.4951"/><line y1="506.4151" x1="1007.412" y2="504.1683" style="stroke:#181818;stroke-width:1.0;" x2="1015.09"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="739.37,584.7983,755.6417,572.7471,759.571,586.1844,739.37,584.7983"/><line y1="571.6806" x1="759.289" y2="585.1179" style="stroke:#181818;stroke-width:2.0;" x2="763.2182"/><text lengthAdjust="spacing" x="791.4421" font-size="13" textLength="218" y="502.8579" font-family="sans-serif" fill="#000000">provision.actor.reference.identifier</text><text lengthAdjust="spacing" x="700.3381" font-size="13" textLength="57" y="575.082" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link Consent to Patient --><g id="link_Consent_Patient"><path codeLine="74" d="M1434.98,529.9483 C1436.55,594.3183 1425.19,666.3083 1378,713.1283 C1328.24,762.4983 878.01,784.4283 663.14,792.1383 " style="stroke:#181818;stroke-width:1.0;" id="Consent-Patient" fill="none"/><line y1="517.9596" x1="1434.4216" y2="510.247" style="stroke:#181818;stroke-width:1.0;" x2="1428.0565"/><line y1="517.9596" x1="1434.4216" y2="509.6896" style="stroke:#181818;stroke-width:1.0;" x2="1440.0435"/><line y1="517.9596" x1="1434.4216" y2="509.9683" style="stroke:#181818;stroke-width:1.0;" x2="1434.05"/><line y1="520.1433" x1="1430.5188" y2="519.7717" style="stroke:#181818;stroke-width:1.0;" x2="1438.5101"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="643.37,792.8383,662.1133,785.1775,662.6034,799.1689,643.37,792.8383"/><line y1="785.0445" x1="665.911" y2="799.0359" style="stroke:#181818;stroke-width:2.0;" x2="666.4011"/><text lengthAdjust="spacing" x="1327.0593" font-size="13" textLength="105" y="528.9063" font-family="sans-serif" fill="#000000">patient.identifier</text><text lengthAdjust="spacing" x="649.5706" font-size="13" textLength="57" y="789.7473" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link Consent to qr1 --><g id="link_Consent_qr1"><path codeLine="75" d="M1267.29,522.9983 C1235.05,552.9083 1203.55,582.1483 1180.07,603.9283 " style="stroke:#181818;stroke-width:1.0;" id="Consent-qr1" fill="none"/><line y1="509.267" x1="1276.2171" y2="515.1312" style="stroke:#181818;stroke-width:1.0;" x2="1281.6587"/><line y1="511.3076" x1="1274.018" y2="517.1718" style="stroke:#181818;stroke-width:1.0;" x2="1279.4597"/><line y1="514.9199" x1="1276.0058" y2="509.4783" style="stroke:#181818;stroke-width:1.0;" x2="1281.87"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="1165.6,617.3583,1174.7667,599.3036,1184.2891,609.5663,1165.6,617.3583"/><line y1="596.7189" x1="1177.5523" y2="606.9816" style="stroke:#181818;stroke-width:2.0;" x2="1187.0747"/><text lengthAdjust="spacing" x="1231.7666" font-size="13" textLength="42" y="528.8957" font-family="sans-serif" fill="#000000">source</text><text lengthAdjust="spacing" x="1157.1904" font-size="13" textLength="12" y="607.8584" font-family="sans-serif" fill="#000000">id</text></g>  <!-- link Consent to permission --><g id="link_Consent_permission"><path codeLine="76" d="M1641.15,512.9783 C1673.04,530.4783 1704.98,547.9983 1734.52,564.1983 " style="stroke:#181818;stroke-width:1.0;" id="Consent-permission" fill="none"/><line y1="514.6435" x1="1644.2071" y2="509.3583" style="stroke:#181818;stroke-width:1.0;" x2="1634.56"/><ellipse cx="1644.2071" cy="514.6435" rx="4" ry="4" style="stroke:#181818;stroke-width:1.0;" fill="none"/><line y1="514.7882" x1="1636.1461" y2="507.7722" style="stroke:#181818;stroke-width:1.0;" x2="1639.9899"/><line y1="562.723" x1="1731.8129" y2="568.0083" style="stroke:#181818;stroke-width:1.0;" x2="1741.46"/><ellipse cx="1731.8129" cy="562.723" rx="4" ry="4" style="stroke:#181818;stroke-width:1.0;" fill="none"/><line y1="562.5783" x1="1739.8739" y2="569.5944" style="stroke:#181818;stroke-width:1.0;" x2="1736.0301"/><text lengthAdjust="spacing" x="1585.2566" font-size="13" textLength="59" y="528.6926" font-family="sans-serif" fill="#000000">policy.uri</text></g>  <!-- link RelatedPerson to p1 --><g id="link_RelatedPerson_p1"><path codeLine="78" d="M432.43,707.5383 C397.61,726.8983 361.01,747.2483 331.77,763.5083 " style="stroke:#181818;stroke-width:1.0;" id="RelatedPerson-p1" fill="none"/><line y1="696.3295" x1="444.3693" y2="703.319" style="stroke:#181818;stroke-width:1.0;" x2="448.2612"/><line y1="697.789" x1="441.7482" y2="704.7785" style="stroke:#181818;stroke-width:1.0;" x2="445.6402"/><line y1="701.7702" x1="442.8205" y2="697.8783" style="stroke:#181818;stroke-width:1.0;" x2="449.81"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="314.59,773.0583,327.7995,757.712,334.5985,769.9502,314.59,773.0583"/><line y1="755.8665" x1="331.1213" y2="768.1047" style="stroke:#181818;stroke-width:2.0;" x2="337.9203"/><text lengthAdjust="spacing" x="379.414" font-size="13" textLength="57" y="717.0616" font-family="sans-serif" fill="#000000">identifier</text><text lengthAdjust="spacing" x="259.1518" font-size="13" textLength="57" y="763.2476" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link RelatedPerson to Patient --><g id="link_RelatedPerson_Patient"><path codeLine="79" d="M550,718.4583 C550,730.1883 550,741.9383 550,752.6083 " style="stroke:#181818;stroke-width:1.0;" id="RelatedPerson-Patient" fill="none"/><line y1="706.6583" x1="550" y2="698.6583" style="stroke:#181818;stroke-width:1.0;" x2="544"/><line y1="706.6583" x1="550" y2="698.6583" style="stroke:#181818;stroke-width:1.0;" x2="556"/><line y1="706.6583" x1="550" y2="698.6583" style="stroke:#181818;stroke-width:1.0;" x2="550"/><line y1="708.6583" x1="546" y2="708.6583" style="stroke:#181818;stroke-width:1.0;" x2="554"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="550,772.2783,543,753.2783,557,753.2783,550,772.2783"/><line y1="749.4783" x1="543" y2="749.4783" style="stroke:#181818;stroke-width:2.0;" x2="557"/><text lengthAdjust="spacing" x="438.9297" font-size="13" textLength="105" y="717.0616" font-family="sans-serif" fill="#000000">patient.identifier</text><text lengthAdjust="spacing" x="485.3406" font-size="13" textLength="57" y="763.2476" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link q1 to qr1 --><g id="link_q1_qr1"><path codeLine="81" d="M841.04,418.1783 C906.7,466.7683 1034.63,561.4583 1100.17,609.9583 " style="stroke:#181818;stroke-width:1.0;" id="q1-qr1" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="830.88,410.6583,835.7328,419.2286,834.8984,413.6336,840.4933,412.7992,830.88,410.6583"/><line y1="413.6336" x1="834.8984" y2="418.3983" style="stroke:#181818;stroke-width:1.0;" x2="841.33"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1110.43,617.5583,1107.9882,610.7732,1100.7859,610.4174,1103.2277,617.2026,1110.43,617.5583"/><text lengthAdjust="spacing" x="817.8177" font-size="13" textLength="17" y="429.7871" font-family="sans-serif" fill="#000000">url</text><text lengthAdjust="spacing" x="1006.2059" font-size="13" textLength="86" y="607.9472" font-family="sans-serif" fill="#000000">questionnaire</text></g>  <!-- link permissionDefinition to permission --><g id="link_permissionDefinition_permission"><path codeLine="82" d="M1990.5,446.3583 C1970.57,479.2383 1945.37,520.8083 1923.42,557.0083 " style="stroke:#181818;stroke-width:1.0;" id="permissionDefinition-permission" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1996.97,435.6883,1988.8851,441.3128,1994.379,439.9646,1995.7272,445.4584,1996.97,435.6883"/><line y1="439.9646" x1="1994.379" y2="446.7983" style="stroke:#181818;stroke-width:1.0;" x2="1990.235"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1916.9,567.7683,1923.432,564.7133,1923.1243,557.5087,1916.5923,560.5637,1916.9,567.7683"/><text lengthAdjust="spacing" x="1975.5934" font-size="13" textLength="17" y="454.724" font-family="sans-serif" fill="#000000">url</text><text lengthAdjust="spacing" x="1830.1324" font-size="13" textLength="86" y="558.4315" font-family="sans-serif" fill="#000000">questionnaire</text></g>  <!-- link task1 to Consent --><g id="link_task1_Consent"><path codeLine="84" d="M1413,210.0083 C1413,220.9483 1413,232.2783 1413,243.6983 " style="stroke:#181818;stroke-width:1.0;" id="task1-Consent" fill="none"/><line y1="194.1683" x1="1409" y2="194.1683" style="stroke:#181818;stroke-width:1.0;" x2="1417"/><line y1="197.1683" x1="1409" y2="197.1683" style="stroke:#181818;stroke-width:1.0;" x2="1417"/><line y1="198.1683" x1="1413" y2="190.1683" style="stroke:#181818;stroke-width:1.0;" x2="1413"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="1413,263.4383,1406,244.4383,1420,244.4383,1413,263.4383"/><line y1="240.6383" x1="1406" y2="240.6383" style="stroke:#181818;stroke-width:2.0;" x2="1420"/><text lengthAdjust="spacing" x="1414" font-size="13" textLength="64" y="231.9566" font-family="sans-serif" fill="#000000">Task.code</text></g>  <!-- link PDS to Patient --><g id="link_PDS_Patient"><path codeLine="89" d="M105.8,654.0983 C124.83,669.9283 160.78,697.6583 196,713.1283 C280.93,750.4283 385.05,772.0983 458.31,783.7783 " style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;" id="PDS-Patient" fill="none"/></g>  <!-- link PDS to p1 --><g id="link_PDS_p1"><path codeLine="90" d="M106.28,654.2183 C136.87,680.0083 209.08,740.8883 248.03,773.7183 " style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;" id="PDS-p1" fill="none"/></g></g></svg></figure>
<p><br clear="all"/></p>

<h3 id="create-a-relationship">Create a relationship</h3>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 338 320" zoomAndPan="magnify" preserveAspectRatio="none" width="338px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:338px;height:320px;background:#FFFFFF;" version="1.1" height="320px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="96.5" font-size="14" textLength="142" y="33.5352" font-family="sans-serif" fill="#000000">Create Relationship</text><rect rx="12.5" ry="12.5" width="140" x="95.5" y="48.4883" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="105.5" font-size="12" textLength="120" y="70.0898" font-family="sans-serif" fill="#000000">Create a relationship</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="118.5,102.6211,212.5,102.6211,224.5,114.6211,212.5,126.6211,118.5,126.6211,106.5,114.6211,118.5,102.6211"/><text lengthAdjust="spacing" x="118.5" font-size="11" textLength="94" y="118.7783" font-family="sans-serif" fill="#000000">Needs Validating?</text><text lengthAdjust="spacing" x="65.5" font-size="11" textLength="41" y="112.3008" font-family="sans-serif" fill="#000000">validate</text><rect rx="12.5" ry="12.5" width="141" x="11" y="136.6211" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="21" font-size="12" textLength="121" y="158.2227" font-family="sans-serif" fill="#000000">Validate Relationship</text><rect rx="12.5" ry="12.5" width="155" x="172" y="136.6211" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="182" font-size="12" textLength="135" y="158.2227" font-family="sans-serif" fill="#000000">Automatically Validated</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="165.5,176.7539,177.5,188.7539,165.5,200.7539,153.5,188.7539,165.5,176.7539"/><rect rx="12.5" ry="12.5" width="151" x="90" y="220.7539" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="100" font-size="12" textLength="131" y="242.3555" font-family="sans-serif" fill="#000000">Relationship is created</text><rect rx="12.5" ry="12.5" width="129" x="101" y="274.8867" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="111" font-size="12" textLength="109" y="296.4883" font-family="sans-serif" fill="#000000">View a relationship</text><line y1="114.6211" x1="106.5" y2="114.6211" style="stroke:#181818;stroke-width:1.0;" x2="81.5"/><line y1="114.6211" x1="81.5" y2="136.6211" style="stroke:#181818;stroke-width:1.0;" x2="81.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="77.5,126.6211,81.5,136.6211,85.5,126.6211,81.5,130.6211"/><line y1="114.6211" x1="224.5" y2="114.6211" style="stroke:#181818;stroke-width:1.0;" x2="249.5"/><line y1="114.6211" x1="249.5" y2="136.6211" style="stroke:#181818;stroke-width:1.0;" x2="249.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="245.5,126.6211,249.5,136.6211,253.5,126.6211,249.5,130.6211"/><line y1="170.7539" x1="81.5" y2="188.7539" style="stroke:#181818;stroke-width:1.0;" x2="81.5"/><line y1="188.7539" x1="81.5" y2="188.7539" style="stroke:#181818;stroke-width:1.0;" x2="153.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="143.5,184.7539,153.5,188.7539,143.5,192.7539,147.5,188.7539"/><line y1="170.7539" x1="249.5" y2="188.7539" style="stroke:#181818;stroke-width:1.0;" x2="249.5"/><line y1="188.7539" x1="249.5" y2="188.7539" style="stroke:#181818;stroke-width:1.0;" x2="177.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="187.5,184.7539,177.5,188.7539,187.5,192.7539,183.5,188.7539"/><line y1="82.6211" x1="165.5" y2="102.6211" style="stroke:#181818;stroke-width:1.0;" x2="165.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="161.5,92.6211,165.5,102.6211,169.5,92.6211,165.5,96.6211"/><line y1="200.7539" x1="165.5" y2="220.7539" style="stroke:#181818;stroke-width:1.0;" x2="165.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="161.5,210.7539,165.5,220.7539,169.5,210.7539,165.5,214.7539"/><line y1="254.8867" x1="165.5" y2="274.8867" style="stroke:#181818;stroke-width:1.0;" x2="165.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="161.5,264.8867,165.5,274.8867,169.5,264.8867,165.5,268.8867"/></g></svg></figure>
<p><br clear="all"/></p>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 917 730" zoomAndPan="magnify" preserveAspectRatio="none" width="917px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:917px;height:730px;background:#FFFFFF;" version="1.1" height="730px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="379" font-size="14" textLength="161" y="28.5352" font-family="sans-serif" fill="#000000">National Proxy Service</text><rect width="659.5" x="250.5" y="309.8398" style="stroke:#000000;stroke-width:1.5;" fill="none" height="324.6816"/><line y1="118.9766" x1="23" y2="723.1426" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="23"/><line y1="118.9766" x1="315.5" y2="723.1426" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="315.5"/><line y1="118.9766" x1="770.5" y2="723.1426" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="770.5"/><line y1="118.9766" x1="886" y2="723.1426" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="886"/><text lengthAdjust="spacing" x="5" font-size="14" textLength="31" y="116.0234" font-family="sans-serif" fill="#000000">User</text><ellipse cx="23.5" cy="50.9883" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0"/><path d="M23.5,58.9883 L23.5,85.9883 M10.5,66.9883 L36.5,66.9883 M23.5,85.9883 L10.5,100.9883 M23.5,85.9883 L36.5,100.9883 " style="stroke:#181818;stroke-width:0.5;" fill="none"/><rect rx="2.5" ry="2.5" width="110" x="260.5" y="87.4883" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="30.4883"/><text lengthAdjust="spacing" x="267.5" font-size="14" textLength="96" y="108.0234" font-family="sans-serif" fill="#000000">NationalProxy</text><rect rx="2.5" ry="2.5" width="80" x="730.5" y="87.4883" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="30.4883"/><text lengthAdjust="spacing" x="737.5" font-size="14" textLength="66" y="108.0234" font-family="sans-serif" fill="#000000">GPSystem</text><text lengthAdjust="spacing" x="874.5" font-size="14" textLength="18" y="116.0234" font-family="sans-serif" fill="#000000">GP</text><ellipse cx="886.5" cy="50.9883" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0"/><path d="M886.5,58.9883 L886.5,85.9883 M873.5,66.9883 L899.5,66.9883 M886.5,85.9883 L873.5,100.9883 M886.5,85.9883 L899.5,100.9883 " style="stroke:#181818;stroke-width:0.5;" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="303.5,161.5977,313.5,165.5977,303.5,169.5977,307.5,165.5977"/><line y1="165.5977" x1="23.5" y2="165.5977" style="stroke:#181818;stroke-width:1.0;" x2="309.5"/><text lengthAdjust="spacing" x="30.5" font-size="13" textLength="130" y="145.5449" font-family="sans-serif" fill="#000000">Create a relationship</text><text lengthAdjust="spacing" x="30.5" font-size="13" textLength="191" y="160.8555" font-family="sans-serif" fill="#000000">POST /QuestionnaireResponse</text><line y1="210.2188" x1="315.5" y2="210.2188" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="210.2188" x1="357.5" y2="223.2188" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="223.2188" x1="316.5" y2="223.2188" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,219.2188,316.5,223.2188,326.5,227.2188,322.5,223.2188"/><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="355" y="190.166" font-family="sans-serif" fill="#000000">Create a Consent resource from the create a relationship</text><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="95" y="205.4766" font-family="sans-serif" fill="#000000">POST \Consent</text><line y1="252.5293" x1="315.5" y2="252.5293" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="252.5293" x1="357.5" y2="265.5293" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="265.5293" x1="316.5" y2="265.5293" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,261.5293,316.5,265.5293,326.5,269.5293,322.5,265.5293"/><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="211" y="247.7871" font-family="sans-serif" fill="#000000">Create a Create Relationship Task</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="34.5,290.8398,24.5,294.8398,34.5,298.8398,30.5,294.8398"/><line y1="294.8398" x1="28.5" y2="294.8398" style="stroke:#181818;stroke-width:1.0;" x2="314.5"/><text lengthAdjust="spacing" x="40.5" font-size="13" textLength="264" y="290.0977" font-family="sans-serif" fill="#000000">Send Task (status=requested) notification</text><path d="M250.5,309.8398 L312.5,309.8398 L312.5,317.1504 L302.5,327.1504 L250.5,327.1504 L250.5,309.8398 " style="stroke:#000000;stroke-width:1.5;" fill="#EEEEEE"/><rect width="659.5" x="250.5" y="309.8398" style="stroke:#000000;stroke-width:1.5;" fill="none" height="324.6816"/><text font-weight="bold" lengthAdjust="spacing" x="265.5" font-size="13" textLength="17" y="323.4082" font-family="sans-serif" fill="#000000">alt</text><text font-weight="bold" lengthAdjust="spacing" x="327.5" font-size="11" textLength="102" y="322.4746" font-family="sans-serif" fill="#000000">[Needs Validating]</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="758.5,359.7715,768.5,363.7715,758.5,367.7715,762.5,363.7715"/><line y1="363.7715" x1="315.5" y2="363.7715" style="stroke:#181818;stroke-width:1.0;" x2="764.5"/><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="140" y="343.7188" font-family="sans-serif" fill="#000000">Validate a relationship</text><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="73" y="359.0293" font-family="sans-serif" fill="#000000">POST /Task</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="781.5,389.082,771.5,393.082,781.5,397.082,777.5,393.082"/><line y1="393.082" x1="775.5" y2="393.082" style="stroke:#181818;stroke-width:1.0;" x2="885.5"/><text lengthAdjust="spacing" x="787.5" font-size="13" textLength="92" y="388.3398" font-family="sans-serif" fill="#000000">Act on request</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,433.7031,316.5,437.7031,326.5,441.7031,322.5,437.7031"/><line y1="437.7031" x1="320.5" y2="437.7031" style="stroke:#181818;stroke-width:1.0;" x2="769.5"/><text lengthAdjust="spacing" x="332.5" font-size="13" textLength="148" y="417.6504" font-family="sans-serif" fill="#000000">Create a permission set</text><text lengthAdjust="spacing" x="332.5" font-size="13" textLength="431" y="432.9609" font-family="sans-serif" fill="#000000">POST /QuestionnaireResponse (echoes FHIR R5 Permission resource)</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,478.3242,316.5,482.3242,326.5,486.3242,322.5,482.3242"/><line y1="482.3242" x1="320.5" y2="482.3242" style="stroke:#181818;stroke-width:1.0;" x2="769.5"/><text lengthAdjust="spacing" x="332.5" font-size="13" textLength="227" y="462.2715" font-family="sans-serif" fill="#000000">Update Consent (link to permission)</text><text lengthAdjust="spacing" x="332.5" font-size="13" textLength="87" y="477.582" font-family="sans-serif" fill="#000000">PUT /Consent</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,522.9453,316.5,526.9453,326.5,530.9453,322.5,526.9453"/><line y1="526.9453" x1="320.5" y2="526.9453" style="stroke:#181818;stroke-width:1.0;" x2="769.5"/><text lengthAdjust="spacing" x="332.5" font-size="13" textLength="215" y="506.8926" font-family="sans-serif" fill="#000000">Respond to Validate a relationship</text><text lengthAdjust="spacing" x="332.5" font-size="13" textLength="198" y="522.2031" font-family="sans-serif" fill="#000000">PUT /Task/{id} (Yes that is fine)</text><line y1="535.9453" x1="250.5" y2="535.9453" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x2="910"/><text font-weight="bold" lengthAdjust="spacing" x="255.5" font-size="11" textLength="141" y="546.5801" font-family="sans-serif" fill="#000000">[Automatically Validated]</text><line y1="571.2109" x1="315.5" y2="571.2109" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="571.2109" x1="357.5" y2="584.2109" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="584.2109" x1="316.5" y2="584.2109" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,580.2109,316.5,584.2109,326.5,588.2109,322.5,584.2109"/><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="148" y="566.4688" font-family="sans-serif" fill="#000000">Create a permission set</text><line y1="613.5215" x1="315.5" y2="613.5215" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="613.5215" x1="357.5" y2="626.5215" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="626.5215" x1="316.5" y2="626.5215" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,622.5215,316.5,626.5215,326.5,630.5215,322.5,626.5215"/><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="177" y="608.7793" font-family="sans-serif" fill="#000000">Updated Consent if required</text><line y1="662.832" x1="315.5" y2="662.832" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="662.832" x1="357.5" y2="675.832" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><line y1="675.832" x1="316.5" y2="675.832" style="stroke:#181818;stroke-width:1.0;" x2="357.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="326.5,671.832,316.5,675.832,326.5,679.832,322.5,675.832"/><text lengthAdjust="spacing" x="322.5" font-size="13" textLength="122" y="658.0898" font-family="sans-serif" fill="#000000">Create Relationship</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="34.5,701.1426,24.5,705.1426,34.5,709.1426,30.5,705.1426"/><line y1="705.1426" x1="28.5" y2="705.1426" style="stroke:#181818;stroke-width:1.0;" x2="314.5"/><text lengthAdjust="spacing" x="40.5" font-size="13" textLength="268" y="700.4004" font-family="sans-serif" fill="#000000">Send Task (status=completed) notification</text></g></svg></figure>
<p><br clear="all"/></p>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://build.fhir.org/ig/HL7/sdc/index.html">FHIR Structured Data Capture</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Create+a+relationship">Confluence Link</a></p>

<p>The documentation above implies the use of a FHIR <code class="language-plaintext highlighter-rouge">RelatedPerson</code> resource. The link below shows the model described on that page using a FHIR <code class="language-plaintext highlighter-rouge">Questionnaire</code> resource.
Note the field <code class="language-plaintext highlighter-rouge">permissions</code> has been omittted. TODO Need to clarify if this is required at this point of the process, this appears to be data from subsequent steps.</p>

<p><a href="Questionnaire-Questionnaire-Proxy-Access-Request.html">Proxy Access Request Form</a></p>

<p>To view this form in a more friendly form, either use the JSON representation with either:</p>

<ul>
  <li><a href="https://lhcformbuilder.nlm.nih.gov/">NLM Form Builder</a> once you are in the main screen, click preview.</li>
  <li>NHS England Data Standards - are working a tool called <code class="language-plaintext highlighter-rouge">Mauro Data Mapper</code> which may become the NHS England equivalent of the NLM product. This may be able to import a FHIR Questionnaire resource.</li>
  <li><a href="https://nhsdigital.github.io/IOPS-Validation-UI/questionnaire">NHS England Interoperabilty Standards Form Viewer - prototype</a> This is a prototype but is connected to NHS England Ontology Server, so both dropdowns work.</li>
</ul>

<div>
<img src="National-Proxy-Request-Form.png" alt="National-Proxy-Request-Form using NHS England Form Viewerr" width="60%"/>
<p>Figure 2 - National Proxy Request Form</p>
<p></p>
</div>

<h3 id="validate-a-relationship">Validate a relationship</h3>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://hl7.org/fhir/R4/workflow.html">FHIR Workflow</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Validate+a+relationship">Confluence Link</a></p>

<p>This process occurs after <a href="#create-a-relationship">Create a relationship</a>. The data model on the confluence page looks like it is a match to <a href="https://hl7.org/fhir/R4/consent.html">FHIR Consent</a>. This probably applies to the confluence categories of:</p>
<ul>
  <li>Safeguarding</li>
  <li>Verification</li>
  <li>Consent</li>
</ul>

<p>TODO this should have a data model, could use FHIR Questionnaire for this but NHS England Data Standards would probably be more appropiate. 
Not all the FHIR Consent needs to be mapped to this model. What we probably do need if we are to follow FHIR Workflow  <a href="https://hl7.org/fhir/R4/workflow.html#relationships">Resource Relationships</a></p>

<p>From a workflow perspective we would be asked a GP (or other) to validate the consent, this could be done via the FHIR Task resource</p>

<p>This <code class="language-plaintext highlighter-rouge">conversation</code> results in state changes as shown below. 
Steps labelled <code class="language-plaintext highlighter-rouge">internal provider workflow</code> are for information purposes and do not result in interactions between National Proxy Service and the supplier (e.g. GP). These represent supplier workflow
Note once the supplier (e.g. GP) has changed the <code class="language-plaintext highlighter-rouge">completed</code> the Consent is automatically updated from <code class="language-plaintext highlighter-rouge">proposed</code> to <code class="language-plaintext highlighter-rouge">active</code> and the RelatedPerson entry is visible on the API with the current status.</p>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 1190 666" zoomAndPan="magnify" preserveAspectRatio="none" width="1190px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:1190px;height:666px;background:#FFFFFF;" version="1.1" height="666px"><defs/><g>  <!-- cluster Consentstatus --><g id="cluster_Consentstatus"><path d="M868.5,330 L1164.5,330 A12.5,12.5 0 0 1 1177,342.5 L1177,351.4883 L856,351.4883 L856,342.5 A12.5,12.5 0 0 1 868.5,330 " style="stroke:#F1F1F1;stroke-width:1.0;" fill="#F1F1F1"/><rect rx="12.5" ry="12.5" width="321" x="856" y="330" style="stroke:#181818;stroke-width:0.5;" fill="none" height="101"/><line y1="351.4883" x1="856" y2="351.4883" style="stroke:#181818;stroke-width:0.5;" x2="1177"/><text lengthAdjust="spacing" x="909.5" font-size="14" textLength="214" y="347.5352" font-family="sans-serif" fill="#000000">Consent.status (Proxy Request)</text></g>  <!-- cluster Taskstatus --><g id="cluster_Taskstatus"><path d="M19.5,7 L819.5,7 A12.5,12.5 0 0 1 832,19.5 L832,28.4883 L7,28.4883 L7,19.5 A12.5,12.5 0 0 1 19.5,7 " style="stroke:#F1F1F1;stroke-width:1.0;" fill="#F1F1F1"/><rect rx="12.5" ry="12.5" width="825" x="7" y="7" style="stroke:#181818;stroke-width:0.5;" fill="none" height="586.31"/><line y1="28.4883" x1="7" y2="28.4883" style="stroke:#181818;stroke-width:0.5;" x2="832"/><text lengthAdjust="spacing" x="285" font-size="14" textLength="269" y="24.5352" font-family="sans-serif" fill="#000000">Tasks.status (Proxy Validation Request)</text></g><g id="Consentstatus.proposed"><rect rx="12.5" ry="12.5" width="86" x="1075" y="365" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="391.4883" x1="1075" y2="391.4883" style="stroke:#181818;stroke-width:0.5;" x2="1161"/><text lengthAdjust="spacing" x="1085" font-size="14" textLength="66" y="383.5352" font-family="sans-serif" fill="#000000">proposed</text></g><g id="Consentstatus.active"><rect rx="12.5" ry="12.5" width="59" x="871.5" y="365" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="391.4883" x1="871.5" y2="391.4883" style="stroke:#181818;stroke-width:0.5;" x2="930.5"/><text lengthAdjust="spacing" x="881.5" font-size="14" textLength="39" y="383.5352" font-family="sans-serif" fill="#000000">active</text></g><g id="Consentstatus.rejected"><rect rx="12.5" ry="12.5" width="75" x="965.5" y="365" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="391.4883" x1="965.5" y2="391.4883" style="stroke:#181818;stroke-width:0.5;" x2="1040.5"/><text lengthAdjust="spacing" x="975.5" font-size="14" textLength="55" y="383.5352" font-family="sans-serif" fill="#000000">rejected</text></g><g id="Taskstatus.requested"><rect rx="12.5" ry="12.5" width="89" x="229.5" y="42" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="68.4883" x1="229.5" y2="68.4883" style="stroke:#181818;stroke-width:0.5;" x2="318.5"/><text lengthAdjust="spacing" x="239.5" font-size="14" textLength="69" y="60.5352" font-family="sans-serif" fill="#000000">requested</text></g><g id="Taskstatus.accepted"><rect rx="12.5" ry="12.5" width="81" x="320.5" y="217" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="243.4883" x1="320.5" y2="243.4883" style="stroke:#181818;stroke-width:0.5;" x2="401.5"/><text lengthAdjust="spacing" x="330.5" font-size="14" textLength="61" y="235.5352" font-family="sans-serif" fill="#000000">accepted</text></g><g id="Taskstatus.rejected"><rect rx="12.5" ry="12.5" width="75" x="496.5" y="217" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="243.4883" x1="496.5" y2="243.4883" style="stroke:#181818;stroke-width:0.5;" x2="571.5"/><text lengthAdjust="spacing" x="506.5" font-size="14" textLength="55" y="235.5352" font-family="sans-serif" fill="#000000">rejected</text></g><g id="Taskstatus.inprogress"><rect rx="12.5" ry="12.5" width="94" x="397" y="365" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="391.4883" x1="397" y2="391.4883" style="stroke:#181818;stroke-width:0.5;" x2="491"/><text lengthAdjust="spacing" x="407" font-size="14" textLength="74" y="383.5352" font-family="sans-serif" fill="#000000">inprogress</text></g><g id="Taskstatus.cancelled"><rect rx="12.5" ry="12.5" width="84" x="340" y="527.31" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="553.7983" x1="340" y2="553.7983" style="stroke:#181818;stroke-width:0.5;" x2="424"/><text lengthAdjust="spacing" x="350" font-size="14" textLength="64" y="545.8452" font-family="sans-serif" fill="#000000">cancelled</text></g><g id="Taskstatus.completed"><rect rx="12.5" ry="12.5" width="92" x="580" y="527.31" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="553.7983" x1="580" y2="553.7983" style="stroke:#181818;stroke-width:0.5;" x2="672"/><text lengthAdjust="spacing" x="590" font-size="14" textLength="72" y="545.8452" font-family="sans-serif" fill="#000000">completed</text></g><ellipse cx="1055" cy="242" rx="10" ry="10" style="stroke:none;stroke-width:1.0;" fill="#181818"/><ellipse cx="918" cy="650.31" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;" fill="none"/><ellipse cx="918.5" cy="650.81" rx="6" ry="6" style="stroke:none;stroke-width:1.0;" fill="#181818"/><g id="RelatedPerson"><rect rx="12.5" ry="12.5" width="141" x="847.5" y="527" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50.6211"/><line y1="553.4883" x1="847.5" y2="553.4883" style="stroke:#181818;stroke-width:0.5;" x2="988.5"/><text lengthAdjust="spacing" x="869" font-size="14" textLength="98" y="545.5352" font-family="sans-serif" fill="#000000">RelatedPerson</text><text lengthAdjust="spacing" x="852.5" font-size="12" textLength="121" y="570.0898" font-family="sans-serif" fill="#000000">[created or updated]</text></g>  <!-- link *start* to proposed --><g id="link_*start*_proposed"><path d="M1058.75,251.7 C1067.67,272.35 1090.46,325.17 1105.03,358.95 " style="stroke:#181818;stroke-width:1.0;" id="*start*-to-proposed" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1106.88,363.22,1106.9743,353.3716,1104.8932,358.6317,1099.6331,356.5505,1106.88,363.22"/></g>  <!-- link proposed to requested --><g id="link_proposed_requested"><path d="M1120.02,364.7 C1121.69,328.16 1119.33,258.9 1083,217 C983.07,101.74 486.56,75.09 324.94,69.42 " style="stroke:#181818;stroke-width:1.0;" id="proposed-to-requested" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="320.39,69.26,329.2477,73.566,325.3871,69.4313,329.5218,65.5707,320.39,69.26"/></g>  <!-- link requested to accepted --><g id="link_requested_accepted"><path d="M229.4,72.98 C173.45,80.25 82.34,95.83 62,122 C44.27,144.81 43.48,164.83 62,187 C93.54,224.75 237.83,236.16 313.84,239.57 " style="stroke:#181818;stroke-width:1.0;" id="requested-to-accepted" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="318.57,239.77,309.7501,235.3872,313.5746,239.5553,309.4065,243.3798,318.57,239.77"/><text lengthAdjust="spacing" x="63" font-size="13" textLength="167" y="159.5684" font-family="sans-serif" fill="#000000">internal provider Workflow</text></g>  <!-- link requested to rejected --><g id="link_requested_rejected"><path d="M318.76,73.75 C375.68,81.91 469.64,98.52 495,122 C519.67,144.83 528.76,183.49 532.1,210.53 " style="stroke:#181818;stroke-width:1.0;" id="requested-to-rejected" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="532.63,215.29,535.6294,205.909,532.0872,210.3195,527.6767,206.7774,532.63,215.29"/><path d="M532,127 L532,182 L804,182 L804,137 L794,127 L532,127 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M794,127 L794,137 L804,137 L794,127 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="538" font-size="13" textLength="251" y="144.5684" font-family="sans-serif" fill="#000000">This may be for several reasons such as</text><text lengthAdjust="spacing" x="538" font-size="13" textLength="225" y="159.8789" font-family="sans-serif" fill="#000000">the requested performer can't verify</text><text lengthAdjust="spacing" x="538" font-size="13" textLength="99" y="175.1895" font-family="sans-serif" fill="#000000">the relationship</text></g>  <!-- link rejected to requested --><g id="link_rejected_requested"><path d="M496.21,233.01 C473.78,228.29 444.78,222.23 419,217 C351.52,203.3 310.72,240.2 267,187 C246.93,162.58 253.3,124.93 261.71,98.54 " style="stroke:#181818;stroke-width:1.0;" id="rejected-to-requested" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="263.28,93.85,256.6326,101.1172,261.6946,98.592,264.2198,103.6539,263.28,93.85"/><path d="M272,134.5 L272,174.5 L482,174.5 L482,144.5 L472,134.5 L272,134.5 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M472,134.5 L472,144.5 L482,144.5 L472,134.5 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="278" font-size="13" textLength="182" y="152.0684" font-family="sans-serif" fill="#000000">The Task is amended, maybe</text><text lengthAdjust="spacing" x="278" font-size="13" textLength="189" y="167.3789" font-family="sans-serif" fill="#000000">edited to add a new performer</text></g>  <!-- link accepted to inprogress --><g id="link_accepted_inprogress"><path d="M374.89,267.44 C389.28,292.75 411.78,332.32 427.17,359.39 " style="stroke:#181818;stroke-width:1.0;" id="accepted-to-inprogress" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="429.59,363.65,428.6151,353.8495,427.117,359.3044,421.6621,357.8063,429.59,363.65"/><text lengthAdjust="spacing" x="401" font-size="13" textLength="167" y="310.5684" font-family="sans-serif" fill="#000000">internal provider Workflow</text></g>  <!-- link accepted to cancelled --><g id="link_accepted_cancelled"><path d="M362.67,267.45 C366.46,323.1 375.72,459.15 379.9,520.46 " style="stroke:#181818;stroke-width:1.0;" id="accepted-to-cancelled" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="380.23,525.35,383.6031,516.0968,379.887,520.3618,375.622,516.6456,380.23,525.35"/></g>  <!-- link inprogress to completed --><g id="link_inprogress_completed"><path d="M471.64,415.35 C504.47,444.27 559.15,492.43 593.85,522.99 " style="stroke:#181818;stroke-width:1.0;" id="inprogress-to-completed" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="597.26,526,593.1738,517.0388,593.5167,522.6853,587.8702,523.0282,597.26,526"/></g>  <!-- link inprogress to cancelled --><g id="link_inprogress_cancelled"><path d="M434.58,415.35 C423.63,443.68 405.53,490.47 393.68,521.1 " style="stroke:#181818;stroke-width:1.0;" id="inprogress-to-cancelled" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="391.95,525.58,398.9185,518.6201,393.7478,520.9144,391.4535,515.7437,391.95,525.58"/></g>  <!-- link requested to cancelled --><g id="link_requested_cancelled"><path d="M229.21,71.87 C168.24,78.18 64.06,92.99 41,122 C23.03,144.62 30.39,160.13 41,187 C102.12,341.73 263.42,469.32 340.22,523.42 " style="stroke:#181818;stroke-width:1.0;" id="requested-to-cancelled" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="343.91,526.01,338.8466,517.5624,339.8192,523.135,334.2466,524.1076,343.91,526.01"/></g>  <!-- link completed to active --><g id="link_completed_active"><path d="M672.22,527.95 C714.51,506.14 778.46,472.08 832,439 C843.31,432.01 855.31,423.92 866.07,416.39 " style="stroke:#181818;stroke-width:1.0;" id="completed-to-active" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="870.01,413.62,860.3511,415.5449,865.926,416.5045,864.9663,422.0794,870.01,413.62"/></g>  <!-- link rejected to rejected --><g id="link_rejected_rejected"><path d="M571.68,246.88 C661.24,256.62 884.15,284.07 948,322 C963.19,331.02 976.02,345.86 985.45,359.29 " style="stroke:#181818;stroke-width:1.0;" id="rejected-to-rejected" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="988.18,363.29,986.4159,353.6004,985.3638,359.1586,979.8056,358.1064,988.18,363.29"/></g>  <!-- link cancelled to *end* --><g id="link_cancelled_*end*"><path d="M424.2,566.19 C460.45,576.86 514.27,591.77 562,601.31 C691.64,627.23 850.68,643.13 901.54,647.84 " style="stroke:#181818;stroke-width:1.0;" id="cancelled-to-*end*" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="906.22,648.27,897.6241,643.4627,901.241,647.8122,896.8915,651.4291,906.22,648.27"/></g>  <!-- link active to RelatedPerson --><g id="link_active_RelatedPerson"><path d="M893.39,415.32 C887.75,437.02 882.12,469.51 889,497 C891.05,505.18 894.59,513.48 898.5,521.04 " style="stroke:#181818;stroke-width:1.0;" id="active-to-RelatedPerson" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="900.83,525.34,900.0565,515.5216,898.4467,520.9445,893.0238,519.3348,900.83,525.34"/><path d="M894,452 L894,492 L1111,492 L1111,462 L1101,452 L894,452 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M1101,452 L1101,462 L1111,462 L1101,452 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="900" font-size="13" textLength="196" y="469.5684" font-family="sans-serif" fill="#000000">This is an implied action based</text><text lengthAdjust="spacing" x="900" font-size="13" textLength="141" y="484.8789" font-family="sans-serif" fill="#000000">on the change of state</text></g>  <!-- link rejected to *end* --><g id="link_rejected_*end*"><path d="M1024.9,415.45 C1034.21,424.31 1045.75,433.49 1058,439 C1070.67,444.7 1110.83,436.57 1120,447 C1134.67,463.69 1128.96,476.66 1120,497 C1083.37,580.18 973.97,628.4 933.38,643.84 " style="stroke:#181818;stroke-width:1.0;" id="rejected-to-*end*" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="928.9,645.5,938.7299,646.1115,933.5863,643.7569,935.9409,638.6134,928.9,645.5"/></g>  <!-- link RelatedPerson to *end* --><g id="link_RelatedPerson_*end*"><path d="M918,578.03 C918,595.57 918,618.57 918,633.64 " style="stroke:#181818;stroke-width:1.0;" id="RelatedPerson-to-*end*" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="918,638.44,922,629.44,918,633.44,914,629.44,918,638.44"/></g></g></svg></figure>
<p><br clear="all"/></p>

<h3 id="view-a-relationship">View a relationship</h3>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
      <th>FHIR Interaction</th>
      <th>FHIR Profile</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>n/a</td>
      <td><a href="restful-api.html">RESTful API</a></td>
      <td><a name="l1280">​</a><a href="StructureDefinition-RelatedPerson">UKCore-RelatedPerson</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/View+a+relationship">Confluence Link</a></p>

<p>See <a href="#view-a-relationship">API Specification</a> below. Note is a potential change here due to the proposed modelling using Consent.</p>

<p>This could mean any of the following</p>

<ul>
  <li>Add _revinclude option on the GET /RelatedPerson API Consent.actor i.e. <code class="language-plaintext highlighter-rouge">GET /RelatedPerson?_revinclude=Consent.actor</code></li>
  <li>Add a GET /Consent/{id} API (really should be provided for <a href="#validate-a-relationship">Validate a relationship</a>) and GET /Consent? with query parameters
    <ul>
      <li>actor (searching for the person making the request)</li>
      <li>patient (search for consents for a patient)</li>
      <li>
        <h3 id="manage-the-lifecycle-of-a-relationship">Manage the lifecycle of a relationship</h3>
      </li>
    </ul>
  </li>
</ul>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 419 268" zoomAndPan="magnify" preserveAspectRatio="none" width="419px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:419px;height:268px;background:#FFFFFF;" version="1.1" height="268px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="132.5" font-size="14" textLength="151" y="33.5352" font-family="sans-serif" fill="#000000">Manage Relationship</text><ellipse cx="209.5" cy="57.4883" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;" fill="#222222"/><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="155,87.4883,264,87.4883,276,99.4883,264,111.4883,155,111.4883,143,99.4883,155,87.4883"/><text lengthAdjust="spacing" x="155" font-size="11" textLength="109" y="103.6455" font-family="sans-serif" fill="#000000">Mange Relationship?</text><rect rx="12.5" ry="12.5" width="233" x="11" y="147.3984" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="21" font-size="12" textLength="213" y="169" font-family="sans-serif" fill="#000000">Manage the lifecycle of a relationship</text><rect rx="12.5" ry="12.5" width="144" x="264" y="147.3984" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="274" font-size="12" textLength="124" y="169" font-family="sans-serif" fill="#000000">Revoke a relationship</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="209.5,191.5313,209.5,191.5313,221.5,203.5313,209.5,215.5313,209.5,215.5313,197.5,203.5313,209.5,191.5313"/><ellipse cx="209.5" cy="246.5313" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;" fill="none"/><ellipse cx="209.5" cy="246.5313" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;" fill="#222222"/><line y1="99.4883" x1="143" y2="99.4883" style="stroke:#181818;stroke-width:1.0;" x2="127.5"/><line y1="99.4883" x1="127.5" y2="147.3984" style="stroke:#181818;stroke-width:1.0;" x2="127.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="123.5,137.3984,127.5,147.3984,131.5,137.3984,127.5,141.3984"/><text lengthAdjust="spacing" x="130.5" font-size="11" textLength="41" y="127.6006" font-family="sans-serif" fill="#000000">Manage</text><line y1="99.4883" x1="276" y2="99.4883" style="stroke:#181818;stroke-width:1.0;" x2="336"/><line y1="99.4883" x1="336" y2="147.3984" style="stroke:#181818;stroke-width:1.0;" x2="336"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="332,137.3984,336,147.3984,340,137.3984,336,141.3984"/><text lengthAdjust="spacing" x="339" font-size="11" textLength="38" y="127.6006" font-family="sans-serif" fill="#000000">Revoke</text><line y1="181.5313" x1="127.5" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="127.5"/><line y1="203.5313" x1="127.5" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="197.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="187.5,199.5313,197.5,203.5313,187.5,207.5313,191.5,203.5313"/><line y1="181.5313" x1="336" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="336"/><line y1="203.5313" x1="336" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="221.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="231.5,199.5313,221.5,203.5313,231.5,207.5313,227.5,203.5313"/><line y1="67.4883" x1="209.5" y2="87.4883" style="stroke:#181818;stroke-width:1.0;" x2="209.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="205.5,77.4883,209.5,87.4883,213.5,77.4883,209.5,81.4883"/><line y1="215.5313" x1="209.5" y2="235.5313" style="stroke:#181818;stroke-width:1.0;" x2="209.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="205.5,225.5313,209.5,235.5313,213.5,225.5313,209.5,229.5313"/></g></svg></figure>
<p><br clear="all"/></p>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://hl7.org/fhir/R4/workflow.html">FHIR Workflow</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Manage+the+lifecycle+of+a+relationship">Confluence Link</a></p>

<p>Would expect this to be a POST /Task from the GP and would follow a similar pattern to <a href="#validate-a-relationship">Validate a relationship</a></p>

<h3 id="revoke-a-relationship">Revoke a relationship</h3>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 419 268" zoomAndPan="magnify" preserveAspectRatio="none" width="419px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:419px;height:268px;background:#FFFFFF;" version="1.1" height="268px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="132.5" font-size="14" textLength="151" y="33.5352" font-family="sans-serif" fill="#000000">Manage Relationship</text><ellipse cx="209.5" cy="57.4883" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;" fill="#222222"/><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="155,87.4883,264,87.4883,276,99.4883,264,111.4883,155,111.4883,143,99.4883,155,87.4883"/><text lengthAdjust="spacing" x="155" font-size="11" textLength="109" y="103.6455" font-family="sans-serif" fill="#000000">Mange Relationship?</text><rect rx="12.5" ry="12.5" width="233" x="11" y="147.3984" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="21" font-size="12" textLength="213" y="169" font-family="sans-serif" fill="#000000">Manage the lifecycle of a relationship</text><rect rx="12.5" ry="12.5" width="144" x="264" y="147.3984" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="34.1328"/><text lengthAdjust="spacing" x="274" font-size="12" textLength="124" y="169" font-family="sans-serif" fill="#000000">Revoke a relationship</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="209.5,191.5313,209.5,191.5313,221.5,203.5313,209.5,215.5313,209.5,215.5313,197.5,203.5313,209.5,191.5313"/><ellipse cx="209.5" cy="246.5313" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;" fill="none"/><ellipse cx="209.5" cy="246.5313" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;" fill="#222222"/><line y1="99.4883" x1="143" y2="99.4883" style="stroke:#181818;stroke-width:1.0;" x2="127.5"/><line y1="99.4883" x1="127.5" y2="147.3984" style="stroke:#181818;stroke-width:1.0;" x2="127.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="123.5,137.3984,127.5,147.3984,131.5,137.3984,127.5,141.3984"/><text lengthAdjust="spacing" x="130.5" font-size="11" textLength="41" y="127.6006" font-family="sans-serif" fill="#000000">Manage</text><line y1="99.4883" x1="276" y2="99.4883" style="stroke:#181818;stroke-width:1.0;" x2="336"/><line y1="99.4883" x1="336" y2="147.3984" style="stroke:#181818;stroke-width:1.0;" x2="336"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="332,137.3984,336,147.3984,340,137.3984,336,141.3984"/><text lengthAdjust="spacing" x="339" font-size="11" textLength="38" y="127.6006" font-family="sans-serif" fill="#000000">Revoke</text><line y1="181.5313" x1="127.5" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="127.5"/><line y1="203.5313" x1="127.5" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="197.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="187.5,199.5313,197.5,203.5313,187.5,207.5313,191.5,203.5313"/><line y1="181.5313" x1="336" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="336"/><line y1="203.5313" x1="336" y2="203.5313" style="stroke:#181818;stroke-width:1.0;" x2="221.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="231.5,199.5313,221.5,203.5313,231.5,207.5313,227.5,203.5313"/><line y1="67.4883" x1="209.5" y2="87.4883" style="stroke:#181818;stroke-width:1.0;" x2="209.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="205.5,77.4883,209.5,87.4883,213.5,77.4883,209.5,81.4883"/><line y1="215.5313" x1="209.5" y2="235.5313" style="stroke:#181818;stroke-width:1.0;" x2="209.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="205.5,225.5313,209.5,235.5313,213.5,225.5313,209.5,229.5313"/></g></svg></figure>
<p><br clear="all"/></p>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://hl7.org/fhir/R4/workflow.html">FHIR Workflow</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Revoke+a+relationship">Confluence Link</a></p>

<p>Would expect this to be a POST /Task from the GP to request the relationship is ended and would follow a similar pattern to <a href="#validate-a-relationship">Validate a relationship</a></p>

<h3 id="api-documentation-capabilitystatement">API Documentation (CapabilityStatement)</h3>

<ol>
  <li>
    <p><a name="l1489">​</a>Copy the JSON version of <a href="CapabilityStatement-Validated-Relationship-Service-Provider.html">CapabilityStatement-Validated-Relationship-Service-Provider</a></p>
  </li>
  <li>
    <p>Paste this into <a href="https://nhsdigital.github.io/IOPS-Validation-UI/api">FHIR Development (Experimental)</a></p>
  </li>
  <li>
    <p>Click ‘Refresh OAS’</p>
  </li>
  <li>
    <p>An OAS representation of the FHIR CapabilityStatement will be rendered on the right hand side of the screen.</p>
  </li>
  <li>
    <p>Click ‘Try it out’ to see an API demonstration.</p>
  </li>
</ol>

<div>
<img src="OAS-Documentation.png" alt="FHIR CapabilityStatement render using OAS/Swagger" width="60%"/>
<p>Figure 3 - FHIR CapabilityStatement render using OAS/Swagger</p>
<p></p>
</div>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &copy; 2024+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.england.nhs.uk/">NHS England</a>.  Package uk.nhs.england.skunkworks#0.0.1 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Thu, Feb 29, 2024 07:38+0000">2024-02-29</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
            <div style="color: #333333">

          Links: <a style="color: #81BEF7" href="toc.html">Table of Contents</a> |
                 <a style="color: #81BEF7" href="qa.html">QA Report</a> 
                 <a rel="license" style="color: #81BEF7" href="http://hl7.org/fhir/R4/license.html"><img src="cc0.png" alt="CC0" style="border-style: none;"/></a>
<div>
</div>

</div>
          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  </body>
</html>