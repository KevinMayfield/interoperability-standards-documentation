<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>National Proxy Service - Interoperability Standards - Skunkworks v0.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>


      <!-- <script src="assets/nhsuk.js" defer></script> -->

      <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->
  <!-- Project extras
<link
        type="font/woff2"
        href="assets/fonts/FrutigerLTW01-55Roman.woff2"
        rel="preload"
        as="font"
        crossorigin
/>
<link
        type="font/woff2"
        href="assets/fonts/FrutigerLTW01-65Bold.woff2"
        rel="preload"
        as="font"
        crossorigin
/>
<link href="assets/css/nhsuk.css" rel="stylesheet" /> -->

  <!-- Bootstrap core CSS overrides to bootstrap-fhir.css -->
<link rel="stylesheet" href="assets/css/nhse.css"/>



    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="fhir-logo" href="assets/ico/icon-fhir-144.png"/>
    <link sizes="114x114" rel="fhir-logo" href="assets/ico/icon-fhir-114.png"/>
    <link sizes="72x72" rel="fhir-logo" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/favicons/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"15"}
    h3,h4,h5,h6{--heading-prefix:"15"}</style>
    <div id="segment-header" class="segment nhsuk-header">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->

  <!-- Left logo - typically the publisher's logo - project or affiliate -->
        <div id="project-nav">
          <a no-external="true" id="project-logo" href="https://www.england.nhs.uk">
            <img src="assets/images/skunk.png" alt="Project home" height="61"/>
          </a>
        </div>

  <!-- Right logo - for example the FHIR logo -->
  <!-- Make sure you have authorization to use the FHIR logo -->

        <div id="family-nav">
              <!-- <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="60" alt="FHIR website" src="assets/images/fhir-logo-www.png"/> </a> -->
        </div> 
      

  <!-- search icon - if you want -->
  <!-- <div id="hl7-search">
          <a id="hl7-search-lnk" no-external="true" href="http://hl7.org/fhir/search.cfm"><img alt="Search FHIR" src="assets/images/search.png"/></a>
        </div> -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Interoperability Standards - Skunkworks</span>
            <br/>
            <span style="display:inline-block;">0.0.1 - ci-build



   <img src="assets/images/GB-ENG.svg" alt="England flag" title="England" height="16"/>


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="toc.html">Table of Contents</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Documentation
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="background.html">Background</a>
      </li>
      <li>
        <a href="interoperability-standards.html">Interoperability Standards</a>
      </li>
      <li>
        <a href="testing.html">Conformance and Testing (FHIR)</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Design
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="administration-module.html">Administration</a>
      </li>
      <li>
        <a href="documents-module.html">Documents (Clinical)</a>
      </li>
      <li>
        <a href="care-planning.html">Care Planning</a>
      </li>
      <li>
        <a href="clinical-module.html">Clinical</a>
      </li>
      <li>
        <a href="diagnostics-module.html">Diagnostics</a>
      </li>
      <li>
        <a href="medications-module.html">Medications</a>
      </li>
      <li>
        <a href="workflow.html">Workflow</a>
      </li>
      <li>
        <a href="structured-data-capture.html">Structured Data Capture</a>
      </li>
      <li>
        <a href="validation.html">FHIR Validation</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Build
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="national-proxy-service.html">National Proxy Service</a>
      </li>
      <li>
        <a href="personal-demographics-service.html">Personal Demographics Service</a>
      </li>
      <li>
        <a href="patient-identity-and-master-index.html">Patient Identity Feed and Master Identity Registry</a>
      </li>
      <li>
        <a href="multicast-notification-service.html">Multicast Notification Service</a>
      </li>
      <li>
        <a href="booking.html">Booking</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">FHIR Assets</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
    </ul>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>National Proxy Service</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Interoperability Standards - Skunkworks - Local Development build (v0.0.1) built by the FHIR (HL7&reg; FHIR&reg; Standard) Build Tools. See the <a href="https://fhir.nhs.uk/England/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>National Proxy Service</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#enterprise-architecture-and-system-architecture-links" id="markdown-toc-enterprise-architecture-and-system-architecture-links">Enterprise Architecture and System Architecture Links</a></li>
  <li><a href="#entity-relationship-diagram" id="markdown-toc-entity-relationship-diagram">Entity Relationship Diagram</a></li>
  <li><a href="#create-a-relationship" id="markdown-toc-create-a-relationship">Create a relationship</a></li>
  <li><a href="#validate-a-relationship" id="markdown-toc-validate-a-relationship">Validate a relationship</a></li>
  <li><a href="#view-a-relationship" id="markdown-toc-view-a-relationship">View a relationship</a></li>
  <li><a href="#manage-the-lifecycle-of-a-relationship" id="markdown-toc-manage-the-lifecycle-of-a-relationship">Manage the lifecycle of a relationship</a></li>
  <li><a href="#revoke-a-relationship" id="markdown-toc-revoke-a-relationship">Revoke a relationship</a></li>
  <li><a href="#api-documentation-capabilitystatement" id="markdown-toc-api-documentation-capabilitystatement">API Documentation (CapabilityStatement)</a></li>
</ul>

</div>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Overview">Internal Confluence Page</a></p>

<h3 id="overview">Overview</h3>

<div>
<img src="National-Proxy-Process-Overview.png" alt="National Proxy Overview" width="60%"/>
<p>Figure 1 - National Proxy Overview</p>
<p></p>
</div>

<h3 id="enterprise-architecture-and-system-architecture-links">Enterprise Architecture and System Architecture Links</h3>

<p>It is believed this service contains <a href="https://profiles.ihe.net/ITI/PCF/index.html">IHE Privacy Consent on FHIR (PCF)</a>, it is the first known service in this category. Links to this IHE Profile will be identified in the relevant sections below. 
This section is similar (but not same) <a href="https://profiles.ihe.net/ITI/PCF/content.html#3584-advanced">advanced consent</a><br/>
So this would apply to NHS England Services following <a href="https://wiki.ihe.net/index.php/Mobile_Health_Document_Sharing_(MHDS)">IHE Mobile Health Document Sharing (MHDS)</a>. Systems identified in this category are:</p>

<p><a href="https://digital.nhs.uk/developer/api-catalogue/national-record-locator-fhir/v3/producer">National Record Locator</a></p>

<p>It also uses <a href="https://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir">Personal Demographics Service</a> and shares a similar `RelatedPerson’ API.</p>

<h3 id="entity-relationship-diagram">Entity Relationship Diagram</h3>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 2064 864" zoomAndPan="magnify" preserveAspectRatio="none" width="2064px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:2064px;height:864px;background:#FFFFFF;" version="1.1" height="864px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="946" font-size="14" textLength="158" y="24.5332" font-family="sans-serif" fill="#000000">National Proxy Service</text><g id="elem_Consent"><rect width="733" x="954" y="276.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="258.5313"/><text lengthAdjust="spacing" x="1294" font-size="14" textLength="53" y="293.1426" font-family="sans-serif" fill="#000000">Consent</text><line y1="298.2188" x1="955" y2="298.2188" style="stroke:#181818;stroke-width:0.5;" x2="1686"/><ellipse cx="965" cy="312.5234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="216" y="316.752" font-family="sans-serif" fill="#000000">status: proposed | active | rejected</text><ellipse cx="965" cy="330.1328" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="78" y="334.3613" font-family="sans-serif" fill="#000000">scope : TBD</text><ellipse cx="965" cy="347.7422" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="263" y="351.9707" font-family="sans-serif" fill="#000000">category: code to represent Proxy Access</text><ellipse cx="965" cy="365.3516" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="180" y="369.5801" font-family="sans-serif" fill="#000000">policy.uri: link to permissions</text><ellipse cx="965" cy="382.9609" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="320" y="387.1895" font-family="sans-serif" fill="#000000">policyRule: code to represent type of Proxy Access</text><ellipse cx="965" cy="400.5703" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="167" y="404.7988" font-family="sans-serif" fill="#000000">dateTime: Data of consent</text><ellipse cx="965" cy="418.1797" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="452" y="422.4082" font-family="sans-serif" fill="#000000">patient.identifier: NHSNumber of the subject of the proxy access request</text><ellipse cx="965" cy="435.7891" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="270" y="440.0176" font-family="sans-serif" fill="#000000">performer: who agreed to the proxy access</text><ellipse cx="965" cy="453.3984" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="339" y="457.627" font-family="sans-serif" fill="#000000">organization: custodian of the consent, NHS England?</text><ellipse cx="965" cy="471.0078" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="521" y="475.2363" font-family="sans-serif" fill="#000000">source: proxy access request form (ProxyAccessRequest:QuestionnaireResponse)</text><ellipse cx="965" cy="488.6172" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="135" y="492.8457" font-family="sans-serif" fill="#000000">provision.type: permit</text><text lengthAdjust="spacing" x="974" font-size="14" textLength="543" y="510.4551" font-family="sans-serif" fill="#000000">provision.period: timeframe this proxy request is valid (and then needs to be reviewed)</text><ellipse cx="965" cy="523.8359" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="974" font-size="14" textLength="707" y="528.0645" font-family="sans-serif" fill="#000000">provision.actor.reference.identifier: NHSNumber of the person making the proxy access request (RelatedPerson)</text></g><g id="elem_RelatedPerson"><rect width="624" x="202.5" y="614.1094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="117.6563"/><text lengthAdjust="spacing" x="467.5" font-size="14" textLength="94" y="630.6426" font-family="sans-serif" fill="#000000">RelatedPerson</text><line y1="635.7188" x1="203.5" y2="635.7188" style="stroke:#181818;stroke-width:0.5;" x2="825.5"/><ellipse cx="213.5" cy="650.0234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="222.5" font-size="14" textLength="452" y="654.252" font-family="sans-serif" fill="#000000">patient.identifier: NHSNumber of the subject of the proxy access request</text><text lengthAdjust="spacing" x="222.5" font-size="14" textLength="429" y="671.8613" font-family="sans-serif" fill="#000000">name: may be useful to prevent call to PDS just to retrieve the name</text><ellipse cx="213.5" cy="685.2422" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="222.5" font-size="14" textLength="445" y="689.4707" font-family="sans-serif" fill="#000000">identifier : NHS Number of the person making the proxy access request</text><ellipse cx="213.5" cy="702.8516" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="222.5" font-size="14" textLength="197" y="707.0801" font-family="sans-serif" fill="#000000">relationship: mother, father, etc</text><text lengthAdjust="spacing" x="222.5" font-size="14" textLength="598" y="724.6895" font-family="sans-serif" fill="#000000">extension.consent: Proxy Acccess Request - should not be present when no consent is present</text></g><g id="elem_Patient"><rect width="168" x="430.5" y="810.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="47.2188"/><text lengthAdjust="spacing" x="492.5" font-size="14" textLength="44" y="827.1426" font-family="sans-serif" fill="#000000">Patient</text><line y1="832.2188" x1="431.5" y2="832.2188" style="stroke:#181818;stroke-width:0.5;" x2="597.5"/><ellipse cx="441.5" cy="846.5234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="450.5" font-size="14" textLength="142" y="850.752" font-family="sans-serif" fill="#000000">identifier : NHSNumber</text></g><g id="elem_p1"><rect width="164" x="174.5" y="810.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="47.2188"/><text lengthAdjust="spacing" x="185.5" font-size="14" textLength="142" y="827.1426" font-family="sans-serif" fill="#000000">RelatedPerson:Patient</text><line y1="832.2188" x1="175.5" y2="832.2188" style="stroke:#181818;stroke-width:0.5;" x2="337.5"/><ellipse cx="185.5" cy="846.5234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="194.5" font-size="14" textLength="138" y="850.752" font-family="sans-serif" fill="#000000">identifier: NHSNumber</text></g><g id="elem_task1"><rect width="449" x="1096" y="45.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="152.875"/><text lengthAdjust="spacing" x="1205.5" font-size="14" textLength="230" y="62.1426" font-family="sans-serif" fill="#000000">ProxyAccessRequestValidation:Task</text><line y1="67.2188" x1="1097" y2="67.2188" style="stroke:#181818;stroke-width:0.5;" x2="1544"/><text lengthAdjust="spacing" x="1116" font-size="14" textLength="287" y="85.752" font-family="sans-serif" fill="#000000">use _history for a record of the conversations</text><ellipse cx="1107" cy="99.1328" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1116" font-size="14" textLength="95" y="103.3613" font-family="sans-serif" fill="#000000">focus: Consent</text><ellipse cx="1107" cy="116.7422" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1116" font-size="14" textLength="152" y="120.9707" font-family="sans-serif" fill="#000000">requester: NHS England</text><ellipse cx="1107" cy="134.3516" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1116" font-size="14" textLength="367" y="138.5801" font-family="sans-serif" fill="#000000">owner: GP, etc who needs to validate the Consent request</text><ellipse cx="1107" cy="151.9609" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1116" font-size="14" textLength="307" y="156.1895" font-family="sans-serif" fill="#000000">code: 'validation' of Consent request (code TBD)</text><ellipse cx="1107" cy="169.5703" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1116" font-size="14" textLength="423" y="173.7988" font-family="sans-serif" fill="#000000">for: can add NHSNumber of the subject of the proxy access request</text><text lengthAdjust="spacing" x="1116" font-size="14" textLength="340" y="191.4082" font-family="sans-serif" fill="#000000">note: use this for communication, i.e. the conversation</text></g><g id="elem_qr1"><rect width="405" x="862" y="649.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="47.2188"/><text lengthAdjust="spacing" x="919.5" font-size="14" textLength="290" y="666.1426" font-family="sans-serif" fill="#000000">ProxyAccessRequest:QuestionnaireResponse</text><line y1="671.2188" x1="863" y2="671.2188" style="stroke:#181818;stroke-width:0.5;" x2="1266"/><ellipse cx="873" cy="685.5234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="882" font-size="14" textLength="379" y="689.752" font-family="sans-serif" fill="#000000">questionnaire: url of the ProxyAccessRequestFormDefinition</text></g><g id="elem_q1"><rect width="335" x="584" y="382.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="47.2188"/><text lengthAdjust="spacing" x="592.5" font-size="14" textLength="318" y="399.1426" font-family="sans-serif" fill="#000000">ProxyAccessRequestFormDefinition:Questionnaire</text><line y1="404.2188" x1="585" y2="404.2188" style="stroke:#181818;stroke-width:0.5;" x2="918"/><ellipse cx="595" cy="418.5234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="604" font-size="14" textLength="309" y="422.752" font-family="sans-serif" fill="#000000">url: url of the ProxyAccessRequestFormDefinition</text></g><g id="elem_permissionDefinition"><rect width="335" x="1722" y="356.1094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="100.0469"/><text lengthAdjust="spacing" x="1779" font-size="14" textLength="221" y="372.6426" font-family="sans-serif" fill="#000000">PermissionDefinition:Questionnaire</text><line y1="377.7188" x1="1723" y2="377.7188" style="stroke:#181818;stroke-width:0.5;" x2="2056"/><ellipse cx="1733" cy="392.0234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1742" font-size="14" textLength="309" y="396.252" font-family="sans-serif" fill="#000000">url: url of the ProxyAccessRequestFormDefinition</text><text lengthAdjust="spacing" x="1742" font-size="14" textLength="95" y="413.8613" font-family="sans-serif" fill="#000000">item : provision</text><text lengthAdjust="spacing" x="1742" font-size="14" textLength="91" y="431.4707" font-family="sans-serif" fill="#000000">item.item: type</text><text lengthAdjust="spacing" x="1742" font-size="14" textLength="102" y="449.0801" font-family="sans-serif" fill="#000000">item.item: action</text></g><g id="elem_permission"><rect width="405" x="1545" y="596.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="152.875"/><text lengthAdjust="spacing" x="1634.5" font-size="14" textLength="226" y="613.1426" font-family="sans-serif" fill="#000000">Permission:QuestionnaireResponse</text><line y1="618.2188" x1="1546" y2="618.2188" style="stroke:#181818;stroke-width:0.5;" x2="1949"/><ellipse cx="1556" cy="632.5234" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;" fill="#000000"/><text lengthAdjust="spacing" x="1565" font-size="14" textLength="379" y="636.752" font-family="sans-serif" fill="#000000">questionnaire: url of the ProxyAccessRequestFormDefinition</text><text lengthAdjust="spacing" x="1565" font-size="14" textLength="95" y="654.3613" font-family="sans-serif" fill="#000000">item : provision</text><text lengthAdjust="spacing" x="1565" font-size="14" textLength="83" y="671.9707" font-family="sans-serif" fill="#000000">item.answer :</text><text lengthAdjust="spacing" x="1565" font-size="14" textLength="91" y="689.5801" font-family="sans-serif" fill="#000000">item.item: type</text><text lengthAdjust="spacing" x="1565" font-size="14" textLength="79" y="707.1895" font-family="sans-serif" fill="#000000">item.answer:</text><text lengthAdjust="spacing" x="1565" font-size="14" textLength="102" y="724.7988" font-family="sans-serif" fill="#000000">item.item: action</text><text lengthAdjust="spacing" x="1565" font-size="14" textLength="79" y="742.4082" font-family="sans-serif" fill="#000000">item.answer:</text></g><g id="elem_PDSOverlap"><path d="M204.5,393.1094 L204.5,419.4609 A0,0 0 0 0 204.5,419.4609 L378.79,419.4609 L484.2,613.9194 L386.79,419.4609 L548.5,419.4609 A0,0 0 0 0 548.5,419.4609 L548.5,403.1094 L538.5,393.1094 L204.5,393.1094 A0,0 0 0 0 204.5,393.1094 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M538.5,393.1094 L538.5,403.1094 L548.5,403.1094 L538.5,393.1094 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="210.5" font-size="13" textLength="323" y="411.6045" font-family="sans-serif" fill="#000000">This is essentially the same as PDS but with a Consent</text></g><g id="elem_PDS"><path d="M6,660.1094 L6,686.4609 L167,686.4609 L167,670.1094 L157,660.1094 L6,660.1094 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M157,660.1094 L157,670.1094 L167,670.1094 L157,660.1094 " style="stroke:#181818;stroke-width:1.0;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="12" font-size="13" textLength="140" y="678.6045" font-family="sans-serif" fill="#000000">This is retrieved via PDS</text></g>  <!-- link Consent to RelatedPerson --><g id="link_Consent_RelatedPerson"><path codeLine="73" d="M934.83,536.1494 C853.93,562.7294 779.69,586.8194 714.41,607.8994 " style="stroke:#181818;stroke-width:1.0;" id="Consent-RelatedPerson" fill="none"/><line y1="527.3179" x1="948.8613" y2="534.9181" style="stroke:#181818;stroke-width:1.0;" x2="951.3585"/><line y1="528.2543" x1="946.0112" y2="535.8546" style="stroke:#181818;stroke-width:1.0;" x2="948.5084"/><line y1="532.3666" x1="946.3097" y2="529.8694" style="stroke:#181818;stroke-width:1.0;" x2="953.91"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="695.34,614.0594,711.2734,601.5644,715.5715,614.8883,695.34,614.0594"/><line y1="600.3978" x1="714.8899" y2="613.7217" style="stroke:#181818;stroke-width:2.0;" x2="719.188"/><text lengthAdjust="spacing" x="753.9592" font-size="13" textLength="192" y="529.3612" font-family="sans-serif" fill="#000000">provision.actor.reference.identifier</text><text lengthAdjust="spacing" x="666.4549" font-size="13" textLength="48" y="603.4251" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link Consent to Patient --><g id="link_Consent_Patient"><path codeLine="74" d="M1343.85,556.2894 C1345.68,624.0594 1333.95,699.9994 1284.5,749.6094 C1238.35,795.9094 817.98,820.0494 618.57,828.9794 " style="stroke:#181818;stroke-width:1.0;" id="Consent-Patient" fill="none"/><line y1="544.0107" x1="1343.2816" y2="536.298" style="stroke:#181818;stroke-width:1.0;" x2="1336.9165"/><line y1="544.0107" x1="1343.2816" y2="535.7407" style="stroke:#181818;stroke-width:1.0;" x2="1348.9035"/><line y1="544.0107" x1="1343.2816" y2="536.0194" style="stroke:#181818;stroke-width:1.0;" x2="1342.91"/><line y1="546.1944" x1="1339.3788" y2="545.8228" style="stroke:#181818;stroke-width:1.0;" x2="1347.3701"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="598.54,829.8594,617.2115,822.025,617.8313,836.0113,598.54,829.8594"/><line y1="821.8568" x1="621.0077" y2="835.8431" style="stroke:#181818;stroke-width:2.0;" x2="621.6276"/><text lengthAdjust="spacing" x="1250.7194" font-size="13" textLength="91" y="556.6466" font-family="sans-serif" fill="#000000">patient.identifier</text><text lengthAdjust="spacing" x="606.4742" font-size="13" textLength="48" y="826.4598" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link Consent to qr1 --><g id="link_Consent_qr1"><path codeLine="75" d="M1182.21,550.2594 C1152.08,581.4494 1122.71,611.8494 1100.85,634.4794 " style="stroke:#181818;stroke-width:1.0;" id="Consent-qr1" fill="none"/><line y1="535.8265" x1="1190.594" y2="541.3854" style="stroke:#181818;stroke-width:1.0;" x2="1196.3471"/><line y1="537.9839" x1="1188.5094" y2="543.5428" style="stroke:#181818;stroke-width:1.0;" x2="1194.2625"/><line y1="541.4825" x1="1190.6911" y2="535.7294" style="stroke:#181818;stroke-width:1.0;" x2="1196.25"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="1086.67,649.1594,1094.8384,630.6316,1104.9064,640.3597,1086.67,649.1594"/><line y1="627.8989" x1="1097.4789" y2="637.6269" style="stroke:#181818;stroke-width:2.0;" x2="1107.5469"/><text lengthAdjust="spacing" x="1149.3887" font-size="13" textLength="39" y="556.773" font-family="sans-serif" fill="#000000">source</text><text lengthAdjust="spacing" x="1080.8552" font-size="13" textLength="10" y="638.8829" font-family="sans-serif" fill="#000000">id</text></g>  <!-- link Consent to permission --><g id="link_Consent_permission"><path codeLine="76" d="M1534.83,540.1194 C1563.49,557.9094 1592.14,575.6894 1618.69,592.1694 " style="stroke:#181818;stroke-width:1.0;" id="Consent-permission" fill="none"/><line y1="541.524" x1="1537.1" y2="535.7294" style="stroke:#181818;stroke-width:1.0;" x2="1527.75"/><ellipse cx="1537.1" cy="541.524" rx="4" ry="4" style="stroke:#181818;stroke-width:1.0;" fill="none"/><line y1="541.2365" x1="1529.0429" y2="534.4365" style="stroke:#181818;stroke-width:1.0;" x2="1533.2571"/><line y1="590.7647" x1="1616.41" y2="596.5594" style="stroke:#181818;stroke-width:1.0;" x2="1625.76"/><ellipse cx="1616.41" cy="590.7647" rx="4" ry="4" style="stroke:#181818;stroke-width:1.0;" fill="none"/><line y1="591.0522" x1="1624.4671" y2="597.8522" style="stroke:#181818;stroke-width:1.0;" x2="1620.2529"/><text lengthAdjust="spacing" x="1485.6621" font-size="13" textLength="52" y="556.773" font-family="sans-serif" fill="#000000">policy.uri</text></g>  <!-- link RelatedPerson to p1 --><g id="link_RelatedPerson_p1"><path codeLine="78" d="M402.98,742.8294 C370.86,762.6294 337.25,783.3394 310.35,799.9194 " style="stroke:#181818;stroke-width:1.0;" id="RelatedPerson-p1" fill="none"/><line y1="730.884" x1="414.7558" y2="737.6936" style="stroke:#181818;stroke-width:1.0;" x2="418.9546"/><line y1="732.4586" x1="412.2022" y2="739.2681" style="stroke:#181818;stroke-width:1.0;" x2="416.4011"/><line y1="736.3882" x1="413.4505" y2="732.1894" style="stroke:#181818;stroke-width:1.0;" x2="420.26"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="293.31,810.4294,305.8124,794.5017,313.1576,806.4201,293.31,810.4294"/><line y1="792.508" x1="309.0474" y2="804.4264" style="stroke:#181818;stroke-width:2.0;" x2="316.3926"/><text lengthAdjust="spacing" x="359.3275" font-size="13" textLength="48" y="753.0594" font-family="sans-serif" fill="#000000">identifier</text><text lengthAdjust="spacing" x="248.5926" font-size="13" textLength="48" y="799.8235" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link RelatedPerson to Patient --><g id="link_RelatedPerson_Patient"><path codeLine="79" d="M514.5,752.5394 C514.5,765.4894 514.5,778.4594 514.5,790.1094 " style="stroke:#181818;stroke-width:1.0;" id="RelatedPerson-Patient" fill="none"/><line y1="740.4094" x1="514.5" y2="732.4094" style="stroke:#181818;stroke-width:1.0;" x2="508.5"/><line y1="740.4094" x1="514.5" y2="732.4094" style="stroke:#181818;stroke-width:1.0;" x2="520.5"/><line y1="740.4094" x1="514.5" y2="732.4094" style="stroke:#181818;stroke-width:1.0;" x2="514.5"/><line y1="742.4094" x1="510.5" y2="742.4094" style="stroke:#181818;stroke-width:1.0;" x2="518.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="514.5,810.4994,507.5,791.4994,521.5,791.4994,514.5,810.4994"/><line y1="787.6994" x1="507.5" y2="787.6994" style="stroke:#181818;stroke-width:2.0;" x2="521.5"/><text lengthAdjust="spacing" x="418.5234" font-size="13" textLength="91" y="753.3035" font-family="sans-serif" fill="#000000">patient.identifier</text><text lengthAdjust="spacing" x="460.35" font-size="13" textLength="48" y="799.9114" font-family="sans-serif" fill="#000000">identifier</text></g>  <!-- link q1 to qr1 --><g id="link_q1_qr1"><path codeLine="81" d="M788.2,438.1894 C848.4,489.1494 967.42,589.9194 1027.69,640.9394 " style="stroke:#181818;stroke-width:1.0;" id="q1-qr1" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="778.19,429.6994,782.4773,438.5661,782.0071,432.9288,787.6444,432.4587,778.19,429.6994"/><line y1="432.9288" x1="782.0071" y2="438.1044" style="stroke:#181818;stroke-width:1.0;" x2="788.11"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1037.88,649.5694,1035.883,642.6403,1028.7189,641.8187,1030.7159,648.7477,1037.88,649.5694"/><text lengthAdjust="spacing" x="769.2356" font-size="13" textLength="14" y="451.3064" font-family="sans-serif" fill="#000000">url</text><text lengthAdjust="spacing" x="943.379" font-size="13" textLength="77" y="638.606" font-family="sans-serif" fill="#000000">questionnaire</text></g>  <!-- link permissionDefinition to permission --><g id="link_permissionDefinition_permission"><path codeLine="82" d="M1856.97,467.8194 C1838.39,502.4894 1814.78,546.5594 1794.24,584.8794 " style="stroke:#181818;stroke-width:1.0;" id="permissionDefinition-permission" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1863.12,456.3294,1855.342,462.3711,1860.7574,460.736,1862.3925,466.1513,1863.12,456.3294"/><line y1="460.736" x1="1860.7574" y2="467.7894" style="stroke:#181818;stroke-width:1.0;" x2="1856.98"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1787.97,596.5794,1794.3304,593.1816,1793.6403,586.0036,1787.2799,589.4014,1787.97,596.5794"/><text lengthAdjust="spacing" x="1844.6346" font-size="13" textLength="14" y="477.6683" font-family="sans-serif" fill="#000000">url</text><text lengthAdjust="spacing" x="1711.1639" font-size="13" textLength="77" y="585.777" font-family="sans-serif" fill="#000000">questionnaire</text></g>  <!-- link task1 to Consent --><g id="link_task1_Consent"><path codeLine="84" d="M1320.5,218.7094 C1320.5,230.9094 1320.5,243.6194 1320.5,256.4094 " style="stroke:#181818;stroke-width:1.0;" id="task1-Consent" fill="none"/><line y1="202.6794" x1="1316.5" y2="202.6794" style="stroke:#181818;stroke-width:1.0;" x2="1324.5"/><line y1="205.6794" x1="1316.5" y2="205.6794" style="stroke:#181818;stroke-width:1.0;" x2="1324.5"/><line y1="206.6794" x1="1320.5" y2="198.6794" style="stroke:#181818;stroke-width:1.0;" x2="1320.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#FFFFFF" points="1320.5,276.5194,1313.5,257.5194,1327.5,257.5194,1320.5,276.5194"/><line y1="253.7194" x1="1313.5" y2="253.7194" style="stroke:#181818;stroke-width:2.0;" x2="1327.5"/><text lengthAdjust="spacing" x="1321.5" font-size="13" textLength="60" y="243.1045" font-family="sans-serif" fill="#000000">Task.code</text></g>  <!-- link PDS to Patient --><g id="link_PDS_Patient"><path codeLine="89" d="M98.67,686.2094 C116.17,702.9294 150.11,732.9094 184.5,749.6094 C263.31,787.8894 361.51,809.8294 430.21,821.5294 " style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;" id="PDS-Patient" fill="none"/></g>  <!-- link PDS to p1 --><g id="link_PDS_p1"><path codeLine="90" d="M99.56,686.3194 C128.01,712.9394 195.98,776.5094 232.43,810.5994 " style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;" id="PDS-p1" fill="none"/></g></g></svg></figure>
<p><br clear="all"/></p>

<h3 id="create-a-relationship">Create a relationship</h3>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 325 324" zoomAndPan="magnify" preserveAspectRatio="none" width="325px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:325px;height:324px;background:#FFFFFF;" version="1.1" height="324px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="91.5" font-size="14" textLength="139" y="34.5332" font-family="sans-serif" fill="#000000">Create Relationship</text><rect rx="12.5" ry="12.5" width="135" x="92.75" y="49.6094" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="102.75" font-size="12" textLength="115" y="72.0664" font-family="sans-serif" fill="#000000">Create a relationship</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="116.75,104.7031,203.75,104.7031,215.75,116.7031,203.75,128.7031,116.75,128.7031,104.75,116.7031,116.75,104.7031"/><text lengthAdjust="spacing" x="116.75" font-size="11" textLength="87" y="121.2041" font-family="sans-serif" fill="#000000">Needs Validating?</text><text lengthAdjust="spacing" x="67.75" font-size="11" textLength="37" y="114.2861" font-family="sans-serif" fill="#000000">validate</text><rect rx="12.5" ry="12.5" width="137" x="11" y="138.7031" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="21" font-size="12" textLength="117" y="161.1602" font-family="sans-serif" fill="#000000">Validate Relationship</text><rect rx="12.5" ry="12.5" width="146" x="168" y="138.7031" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="178" font-size="12" textLength="126" y="161.1602" font-family="sans-serif" fill="#000000">Automatically Validated</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="160.25,179.7969,172.25,191.7969,160.25,203.7969,148.25,191.7969,160.25,179.7969"/><rect rx="12.5" ry="12.5" width="147" x="86.75" y="223.7969" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="96.75" font-size="12" textLength="127" y="246.2539" font-family="sans-serif" fill="#000000">Relationship is created</text><rect rx="12.5" ry="12.5" width="124" x="98.25" y="278.8906" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="108.25" font-size="12" textLength="104" y="301.3477" font-family="sans-serif" fill="#000000">View a relationship</text><line y1="116.7031" x1="104.75" y2="116.7031" style="stroke:#181818;stroke-width:1.0;" x2="79.5"/><line y1="116.7031" x1="79.5" y2="138.7031" style="stroke:#181818;stroke-width:1.0;" x2="79.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="75.5,128.7031,79.5,138.7031,83.5,128.7031,79.5,132.7031"/><line y1="116.7031" x1="215.75" y2="116.7031" style="stroke:#181818;stroke-width:1.0;" x2="241"/><line y1="116.7031" x1="241" y2="138.7031" style="stroke:#181818;stroke-width:1.0;" x2="241"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="237,128.7031,241,138.7031,245,128.7031,241,132.7031"/><line y1="173.7969" x1="79.5" y2="191.7969" style="stroke:#181818;stroke-width:1.0;" x2="79.5"/><line y1="191.7969" x1="79.5" y2="191.7969" style="stroke:#181818;stroke-width:1.0;" x2="148.25"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="138.25,187.7969,148.25,191.7969,138.25,195.7969,142.25,191.7969"/><line y1="173.7969" x1="241" y2="191.7969" style="stroke:#181818;stroke-width:1.0;" x2="241"/><line y1="191.7969" x1="241" y2="191.7969" style="stroke:#181818;stroke-width:1.0;" x2="172.25"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="182.25,187.7969,172.25,191.7969,182.25,195.7969,178.25,191.7969"/><line y1="84.7031" x1="160.25" y2="104.7031" style="stroke:#181818;stroke-width:1.0;" x2="160.25"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="156.25,94.7031,160.25,104.7031,164.25,94.7031,160.25,98.7031"/><line y1="203.7969" x1="160.25" y2="223.7969" style="stroke:#181818;stroke-width:1.0;" x2="160.25"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="156.25,213.7969,160.25,223.7969,164.25,213.7969,160.25,217.7969"/><line y1="258.8906" x1="160.25" y2="278.8906" style="stroke:#181818;stroke-width:1.0;" x2="160.25"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="156.25,268.8906,160.25,278.8906,164.25,268.8906,160.25,272.8906"/></g></svg></figure>
<p><br clear="all"/></p>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 865 754" zoomAndPan="magnify" preserveAspectRatio="none" width="865px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:865px;height:754px;background:#FFFFFF;" version="1.1" height="754px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="354.5" font-size="14" textLength="158" y="29.5332" font-family="sans-serif" fill="#000000">National Proxy Service</text><rect width="627.5" x="230.5" y="318.3281" style="stroke:#000000;stroke-width:1.5;" fill="none" height="338.0547"/><line y1="121.2188" x1="22" y2="747.0859" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="22"/><line y1="121.2188" x1="290.5" y2="747.0859" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="290.5"/><line y1="121.2188" x1="725.5" y2="747.0859" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="725.5"/><line y1="121.2188" x1="834" y2="747.0859" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="834"/><text lengthAdjust="spacing" x="5" font-size="14" textLength="29" y="118.1426" font-family="sans-serif" fill="#000000">User</text><ellipse cx="22.5" cy="52.1094" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0"/><path d="M22.5,60.1094 L22.5,87.1094 M9.5,68.1094 L35.5,68.1094 M22.5,87.1094 L9.5,102.1094 M22.5,87.1094 L35.5,102.1094 " style="stroke:#181818;stroke-width:0.5;" fill="none"/><rect rx="2.5" ry="2.5" width="100" x="240.5" y="88.6094" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="31.6094"/><text lengthAdjust="spacing" x="247.5" font-size="14" textLength="86" y="110.1426" font-family="sans-serif" fill="#000000">NationalProxy</text><rect rx="2.5" ry="2.5" width="80" x="685.5" y="88.6094" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="31.6094"/><text lengthAdjust="spacing" x="692.5" font-size="14" textLength="66" y="110.1426" font-family="sans-serif" fill="#000000">GPSystem</text><text lengthAdjust="spacing" x="821.5" font-size="14" textLength="20" y="118.1426" font-family="sans-serif" fill="#000000">GP</text><ellipse cx="834.5" cy="52.1094" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0"/><path d="M834.5,60.1094 L834.5,87.1094 M821.5,68.1094 L847.5,68.1094 M834.5,87.1094 L821.5,102.1094 M834.5,87.1094 L847.5,102.1094 " style="stroke:#181818;stroke-width:0.5;" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="278.5,165.9219,288.5,169.9219,278.5,173.9219,282.5,169.9219"/><line y1="169.9219" x1="22.5" y2="169.9219" style="stroke:#181818;stroke-width:1.0;" x2="284.5"/><text lengthAdjust="spacing" x="29.5" font-size="13" textLength="119" y="148.7139" font-family="sans-serif" fill="#000000">Create a relationship</text><text lengthAdjust="spacing" x="29.5" font-size="13" textLength="181" y="165.0654" font-family="sans-serif" fill="#000000">POST /QuestionnaireResponse</text><line y1="216.625" x1="290.5" y2="216.625" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="216.625" x1="332.5" y2="229.625" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="229.625" x1="291.5" y2="229.625" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,225.625,291.5,229.625,301.5,233.625,297.5,229.625"/><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="327" y="195.417" font-family="sans-serif" fill="#000000">Create a Consent resource from the create a relationship</text><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="91" y="211.7686" font-family="sans-serif" fill="#000000">POST \Consent</text><line y1="259.9766" x1="290.5" y2="259.9766" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="259.9766" x1="332.5" y2="272.9766" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="272.9766" x1="291.5" y2="272.9766" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,268.9766,291.5,272.9766,301.5,276.9766,297.5,272.9766"/><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="198" y="255.1201" font-family="sans-serif" fill="#000000">Create a Create Relationship Task</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="33.5,299.3281,23.5,303.3281,33.5,307.3281,29.5,303.3281"/><line y1="303.3281" x1="27.5" y2="303.3281" style="stroke:#181818;stroke-width:1.0;" x2="289.5"/><text lengthAdjust="spacing" x="39.5" font-size="13" textLength="241" y="298.4717" font-family="sans-serif" fill="#000000">Send Task (status=requested) notification</text><path d="M230.5,318.3281 L291.5,318.3281 L291.5,326.6797 L281.5,336.6797 L230.5,336.6797 L230.5,318.3281 " style="stroke:#000000;stroke-width:1.5;" fill="#EEEEEE"/><rect width="627.5" x="230.5" y="318.3281" style="stroke:#000000;stroke-width:1.5;" fill="none" height="338.0547"/><text font-weight="bold" lengthAdjust="spacing" x="245.5" font-size="13" textLength="16" y="332.8232" font-family="sans-serif" fill="#000000">alt</text><text font-weight="bold" lengthAdjust="spacing" x="306.5" font-size="11" textLength="100" y="331.7471" font-family="sans-serif" fill="#000000">[Needs Validating]</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="713.5,371.3828,723.5,375.3828,713.5,379.3828,717.5,375.3828"/><line y1="375.3828" x1="290.5" y2="375.3828" style="stroke:#181818;stroke-width:1.0;" x2="719.5"/><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="128" y="354.1748" font-family="sans-serif" fill="#000000">Validate a relationship</text><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="71" y="370.5264" font-family="sans-serif" fill="#000000">POST /Task</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="736.5,401.7344,726.5,405.7344,736.5,409.7344,732.5,405.7344"/><line y1="405.7344" x1="730.5" y2="405.7344" style="stroke:#181818;stroke-width:1.0;" x2="833.5"/><text lengthAdjust="spacing" x="742.5" font-size="13" textLength="85" y="400.8779" font-family="sans-serif" fill="#000000">Act on request</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,448.4375,291.5,452.4375,301.5,456.4375,297.5,452.4375"/><line y1="452.4375" x1="295.5" y2="452.4375" style="stroke:#181818;stroke-width:1.0;" x2="724.5"/><text lengthAdjust="spacing" x="307.5" font-size="13" textLength="138" y="431.2295" font-family="sans-serif" fill="#000000">Create a permission set</text><text lengthAdjust="spacing" x="307.5" font-size="13" textLength="411" y="447.5811" font-family="sans-serif" fill="#000000">POST /QuestionnaireResponse (echoes FHIR R5 Permission resource)</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,495.1406,291.5,499.1406,301.5,503.1406,297.5,499.1406"/><line y1="499.1406" x1="295.5" y2="499.1406" style="stroke:#181818;stroke-width:1.0;" x2="724.5"/><text lengthAdjust="spacing" x="307.5" font-size="13" textLength="207" y="477.9326" font-family="sans-serif" fill="#000000">Update Consent (link to permission)</text><text lengthAdjust="spacing" x="307.5" font-size="13" textLength="81" y="494.2842" font-family="sans-serif" fill="#000000">PUT /Consent</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,541.8438,291.5,545.8438,301.5,549.8438,297.5,545.8438"/><line y1="545.8438" x1="295.5" y2="545.8438" style="stroke:#181818;stroke-width:1.0;" x2="724.5"/><text lengthAdjust="spacing" x="307.5" font-size="13" textLength="198" y="524.6357" font-family="sans-serif" fill="#000000">Respond to Validate a relationship</text><text lengthAdjust="spacing" x="307.5" font-size="13" textLength="182" y="540.9873" font-family="sans-serif" fill="#000000">PUT /Task/{id} (Yes that is fine)</text><line y1="554.8438" x1="230.5" y2="554.8438" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x2="858"/><text font-weight="bold" lengthAdjust="spacing" x="235.5" font-size="11" textLength="136" y="566.2627" font-family="sans-serif" fill="#000000">[Automatically Validated]</text><line y1="592.0313" x1="290.5" y2="592.0313" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="592.0313" x1="332.5" y2="605.0313" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="605.0313" x1="291.5" y2="605.0313" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,601.0313,291.5,605.0313,301.5,609.0313,297.5,605.0313"/><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="138" y="587.1748" font-family="sans-serif" fill="#000000">Create a permission set</text><line y1="635.3828" x1="290.5" y2="635.3828" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="635.3828" x1="332.5" y2="648.3828" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="648.3828" x1="291.5" y2="648.3828" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,644.3828,291.5,648.3828,301.5,652.3828,297.5,648.3828"/><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="160" y="630.5264" font-family="sans-serif" fill="#000000">Updated Consent if required</text><line y1="685.7344" x1="290.5" y2="685.7344" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="685.7344" x1="332.5" y2="698.7344" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><line y1="698.7344" x1="291.5" y2="698.7344" style="stroke:#181818;stroke-width:1.0;" x2="332.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="301.5,694.7344,291.5,698.7344,301.5,702.7344,297.5,698.7344"/><text lengthAdjust="spacing" x="297.5" font-size="13" textLength="113" y="680.8779" font-family="sans-serif" fill="#000000">Create Relationship</text><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="33.5,725.0859,23.5,729.0859,33.5,733.0859,29.5,729.0859"/><line y1="729.0859" x1="27.5" y2="729.0859" style="stroke:#181818;stroke-width:1.0;" x2="289.5"/><text lengthAdjust="spacing" x="39.5" font-size="13" textLength="244" y="724.2295" font-family="sans-serif" fill="#000000">Send Task (status=completed) notification</text></g></svg></figure>
<p><br clear="all"/></p>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://build.fhir.org/ig/HL7/sdc/index.html">FHIR Structured Data Capture</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Create+a+relationship">Confluence Link</a></p>

<p>The documentation above implies the use of a FHIR <code class="language-plaintext highlighter-rouge">RelatedPerson</code> resource. The link below shows the model described on that page using a FHIR <code class="language-plaintext highlighter-rouge">Questionnaire</code> resource.
Note the field <code class="language-plaintext highlighter-rouge">permissions</code> has been omittted. TODO Need to clarify if this is required at this point of the process, this appears to be data from subsequent steps.</p>

<p><a href="Questionnaire-Questionnaire-Proxy-Access-Request.html">Proxy Access Request Form</a></p>

<p>To view this form in a more friendly form, either use the JSON representation with either:</p>

<ul>
  <li><a href="https://lhcformbuilder.nlm.nih.gov/">NLM Form Builder</a> once you are in the main screen, click preview.</li>
  <li>NHS England Data Standards - are working a tool called <code class="language-plaintext highlighter-rouge">Mauro Data Mapper</code> which may become the NHS England equivalent of the NLM product. This may be able to import a FHIR Questionnaire resource.</li>
  <li><a href="https://nhsdigital.github.io/IOPS-Validation-UI/questionnaire">NHS England Interoperabilty Standards Form Viewer - prototype</a> This is a prototype but is connected to NHS England Ontology Server, so both dropdowns work.</li>
</ul>

<div>
<img src="National-Proxy-Request-Form.png" alt="National-Proxy-Request-Form using NHS England Form Viewerr" width="60%"/>
<p>Figure 2 - National Proxy Request Form</p>
<p></p>
</div>

<h3 id="validate-a-relationship">Validate a relationship</h3>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://hl7.org/fhir/R4/workflow.html">FHIR Workflow</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Validate+a+relationship">Confluence Link</a></p>

<p>This process occurs after <a href="#create-a-relationship">Create a relationship</a>. The data model on the confluence page looks like it is a match to <a href="https://hl7.org/fhir/R4/consent.html">FHIR Consent</a>. This probably applies to the confluence categories of:</p>
<ul>
  <li>Safeguarding</li>
  <li>Verification</li>
  <li>Consent</li>
</ul>

<p>TODO this should have a data model, could use FHIR Questionnaire for this but NHS England Data Standards would probably be more appropiate. 
Not all the FHIR Consent needs to be mapped to this model. What we probably do need if we are to follow FHIR Workflow  <a href="https://hl7.org/fhir/R4/workflow.html#relationships">Resource Relationships</a></p>

<p>From a workflow perspective we would be asked a GP (or other) to validate the consent, this could be done via the FHIR Task resource</p>

<p>This <code class="language-plaintext highlighter-rouge">conversation</code> results in state changes as shown below. 
Steps labelled <code class="language-plaintext highlighter-rouge">internal provider workflow</code> are for information purposes and do not result in interactions between National Proxy Service and the supplier (e.g. GP). These represent supplier workflow
Note once the supplier (e.g. GP) has changed the <code class="language-plaintext highlighter-rouge">completed</code> the Consent is automatically updated from <code class="language-plaintext highlighter-rouge">proposed</code> to <code class="language-plaintext highlighter-rouge">active</code> and the RelatedPerson entry is visible on the API with the current status.</p>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 1124 676" zoomAndPan="magnify" preserveAspectRatio="none" width="1124px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:1124px;height:676px;background:#FFFFFF;" version="1.1" height="676px"><defs/><g>  <!-- cluster Consentstatus --><g id="cluster_Consentstatus"><path d="M812.5,336 L1098.5,336 A12.5,12.5 0 0 1 1111,348.5 L1111,358.6094 L800,358.6094 L800,348.5 A12.5,12.5 0 0 1 812.5,336 " style="stroke:#F1F1F1;stroke-width:1.0;" fill="#F1F1F1"/><rect rx="12.5" ry="12.5" width="311" x="800" y="336" style="stroke:#181818;stroke-width:0.5;" fill="none" height="102"/><line y1="358.6094" x1="800" y2="358.6094" style="stroke:#181818;stroke-width:0.5;" x2="1111"/><text lengthAdjust="spacing" x="855" font-size="14" textLength="201" y="354.5332" font-family="sans-serif" fill="#000000">Consent.status (Proxy Request)</text></g>  <!-- cluster Taskstatus --><g id="cluster_Taskstatus"><path d="M19.5,7 L763.5,7 A12.5,12.5 0 0 1 776,19.5 L776,29.6094 L7,29.6094 L7,19.5 A12.5,12.5 0 0 1 19.5,7 " style="stroke:#F1F1F1;stroke-width:1.0;" fill="#F1F1F1"/><rect rx="12.5" ry="12.5" width="769" x="7" y="7" style="stroke:#181818;stroke-width:0.5;" fill="none" height="596.5"/><line y1="29.6094" x1="7" y2="29.6094" style="stroke:#181818;stroke-width:0.5;" x2="776"/><text lengthAdjust="spacing" x="265.5" font-size="14" textLength="252" y="25.5332" font-family="sans-serif" fill="#000000">Tasks.status (Proxy Validation Request)</text></g><g id="Consentstatus.proposed"><rect rx="12.5" ry="12.5" width="80" x="1015" y="372" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="399.6094" x1="1015" y2="399.6094" style="stroke:#181818;stroke-width:0.5;" x2="1095"/><text lengthAdjust="spacing" x="1025" font-size="14" textLength="60" y="391.5332" font-family="sans-serif" fill="#000000">proposed</text></g><g id="Consentstatus.active"><rect rx="12.5" ry="12.5" width="57" x="816.5" y="372" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="399.6094" x1="816.5" y2="399.6094" style="stroke:#181818;stroke-width:0.5;" x2="873.5"/><text lengthAdjust="spacing" x="826.5" font-size="14" textLength="37" y="391.5332" font-family="sans-serif" fill="#000000">active</text></g><g id="Consentstatus.rejected"><rect rx="12.5" ry="12.5" width="71" x="908.5" y="372" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="399.6094" x1="908.5" y2="399.6094" style="stroke:#181818;stroke-width:0.5;" x2="979.5"/><text lengthAdjust="spacing" x="918.5" font-size="14" textLength="51" y="391.5332" font-family="sans-serif" fill="#000000">rejected</text></g><g id="Taskstatus.requested"><rect rx="12.5" ry="12.5" width="84" x="212" y="43" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="70.6094" x1="212" y2="70.6094" style="stroke:#181818;stroke-width:0.5;" x2="296"/><text lengthAdjust="spacing" x="222" font-size="14" textLength="64" y="62.5332" font-family="sans-serif" fill="#000000">requested</text></g><g id="Taskstatus.accepted"><rect rx="12.5" ry="12.5" width="78" x="296" y="222" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="249.6094" x1="296" y2="249.6094" style="stroke:#181818;stroke-width:0.5;" x2="374"/><text lengthAdjust="spacing" x="306" font-size="14" textLength="58" y="241.5332" font-family="sans-serif" fill="#000000">accepted</text></g><g id="Taskstatus.rejected"><rect rx="12.5" ry="12.5" width="71" x="460.5" y="222" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="249.6094" x1="460.5" y2="249.6094" style="stroke:#181818;stroke-width:0.5;" x2="531.5"/><text lengthAdjust="spacing" x="470.5" font-size="14" textLength="51" y="241.5332" font-family="sans-serif" fill="#000000">rejected</text></g><g id="Taskstatus.inprogress"><rect rx="12.5" ry="12.5" width="87" x="371.5" y="372" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="399.6094" x1="371.5" y2="399.6094" style="stroke:#181818;stroke-width:0.5;" x2="458.5"/><text lengthAdjust="spacing" x="381.5" font-size="14" textLength="67" y="391.5332" font-family="sans-serif" fill="#000000">inprogress</text></g><g id="Taskstatus.cancelled"><rect rx="12.5" ry="12.5" width="80" x="315" y="537.5" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="565.1094" x1="315" y2="565.1094" style="stroke:#181818;stroke-width:0.5;" x2="395"/><text lengthAdjust="spacing" x="325" font-size="14" textLength="60" y="557.0332" font-family="sans-serif" fill="#000000">cancelled</text></g><g id="Taskstatus.completed"><rect rx="12.5" ry="12.5" width="85" x="541.5" y="537.5" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="50"/><line y1="565.1094" x1="541.5" y2="565.1094" style="stroke:#181818;stroke-width:0.5;" x2="626.5"/><text lengthAdjust="spacing" x="551.5" font-size="14" textLength="65" y="557.0332" font-family="sans-serif" fill="#000000">completed</text></g><ellipse cx="992" cy="247" rx="10" ry="10" style="stroke:none;stroke-width:1.0;" fill="#181818"/><ellipse cx="857" cy="660.5" rx="10" ry="10" style="stroke:#181818;stroke-width:1.0;" fill="none"/><ellipse cx="857.5" cy="661" rx="6" ry="6" style="stroke:none;stroke-width:1.0;" fill="#181818"/><g id="RelatedPerson"><rect rx="12.5" ry="12.5" width="129" x="792.5" y="536" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="52.7031"/><line y1="563.6094" x1="792.5" y2="563.6094" style="stroke:#181818;stroke-width:0.5;" x2="921.5"/><text lengthAdjust="spacing" x="810" font-size="14" textLength="94" y="555.5332" font-family="sans-serif" fill="#000000">RelatedPerson</text><text lengthAdjust="spacing" x="797.5" font-size="12" textLength="109" y="581.0664" font-family="sans-serif" fill="#000000">[created or updated]</text></g>  <!-- link *start* to proposed --><g id="link_*start*_proposed"><path d="M995.57,256.38 C1004.47,277.3 1028.02,332.62 1042.66,367.01 " style="stroke:#181818;stroke-width:1.0;" id="*start*-to-proposed" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="1044.75,371.93,1044.9072,362.0824,1042.7925,367.3291,1037.5458,365.2144,1044.75,371.93"/></g>  <!-- link proposed to requested --><g id="link_proposed_requested"><path d="M1056.98,371.83 C1058.63,335.1 1056.29,264.96 1020,222 C926.32,111.11 453.62,78.69 301.34,71.04 " style="stroke:#181818;stroke-width:1.0;" id="proposed-to-requested" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="296.06,70.78,304.8553,75.2119,301.0541,71.0226,305.2435,67.2213,296.06,70.78"/></g>  <!-- link requested to accepted --><g id="link_requested_accepted"><path d="M211.8,74.89 C160.94,82.95 80.03,99.19 62,123 C43.48,147.44 42.53,168.3 62,192 C90.43,226.61 220.9,239.41 290.67,243.84 " style="stroke:#181818;stroke-width:1.0;" id="requested-to-accepted" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="296,244.17,287.2695,239.6117,291.0099,243.8554,286.7662,247.5959,296,244.17"/><text lengthAdjust="spacing" x="63" font-size="13" textLength="147" y="162.9951" font-family="sans-serif" fill="#000000">internal provider Workflow</text></g>  <!-- link requested to rejected --><g id="link_requested_rejected"><path d="M296.21,68.87 C341.72,71.04 413.46,81.46 457,123 C482.64,147.46 491.48,188.64 494.5,216.55 " style="stroke:#181818;stroke-width:1.0;" id="requested-to-rejected" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="495,221.6,498.1085,212.2546,494.5152,216.6236,490.1462,213.0303,495,221.6"/><path d="M495,128 L495,187 L749,187 L749,138 L739,128 L495,128 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M739,128 L739,138 L749,138 L739,128 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="501" font-size="13" textLength="233" y="146.4951" font-family="sans-serif" fill="#000000">This may be for several reasons such as</text><text lengthAdjust="spacing" x="501" font-size="13" textLength="201" y="162.8467" font-family="sans-serif" fill="#000000">the requested performer can't verify</text><text lengthAdjust="spacing" x="501" font-size="13" textLength="88" y="179.1982" font-family="sans-serif" fill="#000000">the relationship</text></g>  <!-- link rejected to requested --><g id="link_rejected_requested"><path d="M460.43,237.58 C440.36,232.88 414.81,226.99 392,222 C327.71,207.93 288.55,243.03 247,192 C225.77,165.92 233.25,125.49 242.19,98.16 " style="stroke:#181818;stroke-width:1.0;" id="rejected-to-requested" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="243.87,93.22,237.1768,100.445,242.2546,97.9519,244.7478,103.0297,243.87,93.22"/><path d="M252,136.5 L252,178.5 L444,178.5 L444,146.5 L434,136.5 L252,136.5 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M434,136.5 L434,146.5 L444,146.5 L434,136.5 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="258" font-size="13" textLength="171" y="154.9951" font-family="sans-serif" fill="#000000">The Task is amended, maybe</text><text lengthAdjust="spacing" x="258" font-size="13" textLength="171" y="171.3467" font-family="sans-serif" fill="#000000">edited to add a new performer</text></g>  <!-- link accepted to inprogress --><g id="link_accepted_inprogress"><path d="M348.03,272.11 C362.09,298.12 384.48,339.54 399.45,367.24 " style="stroke:#181818;stroke-width:1.0;" id="accepted-to-inprogress" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="401.97,371.9,401.1965,362.0816,399.5867,367.5045,394.1638,365.8948,401.97,371.9"/><text lengthAdjust="spacing" x="373" font-size="13" textLength="147" y="316.4951" font-family="sans-serif" fill="#000000">internal provider Workflow</text></g>  <!-- link accepted to cancelled --><g id="link_accepted_cancelled"><path d="M336.54,272.08 C340.16,328.84 349.22,470.85 353.14,532.35 " style="stroke:#181818;stroke-width:1.0;" id="accepted-to-cancelled" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="353.46,537.34,356.8875,528.1068,353.1463,532.3498,348.9033,528.6087,353.46,537.34"/></g>  <!-- link inprogress to completed --><g id="link_inprogress_completed"><path d="M439.94,422.12 C470.64,451.83 522.69,502.19 555.11,533.55 " style="stroke:#181818;stroke-width:1.0;" id="inprogress-to-completed" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="558.96,537.28,555.2579,528.1534,555.3608,533.8093,549.7049,533.9122,558.96,537.28"/></g>  <!-- link inprogress to cancelled --><g id="link_inprogress_cancelled"><path d="M406.15,422.12 C395.38,451.47 377.22,500.96 365.68,532.39 " style="stroke:#181818;stroke-width:1.0;" id="inprogress-to-cancelled" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="363.89,537.28,370.7507,530.2139,365.6159,532.5873,363.2424,527.4525,363.89,537.28"/></g>  <!-- link requested to cancelled --><g id="link_requested_cancelled"><path d="M211.87,73.55 C155.7,80.59 60.9,96.17 40,123 C21.15,147.19 29.4,163.22 40,192 C96.57,345.56 248.49,478.71 318.61,534.09 " style="stroke:#181818;stroke-width:1.0;" id="requested-to-cancelled" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="322.7,537.31,318.1126,528.5948,318.7749,534.2127,313.1569,534.875,322.7,537.31"/></g>  <!-- link completed to active --><g id="link_completed_active"><path d="M625.69,537.5 C664.91,514.66 725.06,478.99 776,446 C788,438.23 800.92,429.38 812.3,421.41 " style="stroke:#181818;stroke-width:1.0;" id="completed-to-active" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="816.42,418.52,806.7566,420.4224,812.3292,421.395,811.3566,426.9676,816.42,418.52"/></g>  <!-- link rejected to rejected --><g id="link_rejected_rejected"><path d="M531.71,247.23 C604.8,247.27 774.39,255.82 891,328 C906.57,337.64 919.36,353.6 928.48,367.63 " style="stroke:#181818;stroke-width:1.0;" id="rejected-to-rejected" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="931.19,371.91,929.7499,362.167,928.513,367.687,922.9931,366.4501,931.19,371.91"/></g>  <!-- link cancelled to *end* --><g id="link_cancelled_*end*"><path d="M395.25,576.58 C429.26,587.22 479.4,602 524,611.5 C645.32,637.35 794.52,653.34 841.85,658.05 " style="stroke:#181818;stroke-width:1.0;" id="cancelled-to-*end*" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="847.11,658.56,838.5416,653.7038,842.1337,658.0738,837.7637,661.6659,847.11,658.56"/></g>  <!-- link active to RelatedPerson --><g id="link_active_RelatedPerson"><path d="M838,422.22 C832.65,444.25 827.11,477.55 833,506 C834.74,514.43 837.83,523.15 841.23,531.11 " style="stroke:#181818;stroke-width:1.0;" id="active-to-RelatedPerson" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="843.37,535.96,843.3757,526.1111,841.342,531.3898,836.0633,529.356,843.37,535.96"/><path d="M838,459 L838,501 L1038,501 L1038,469 L1028,459 L838,459 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><path d="M1028,459 L1028,469 L1038,469 L1028,459 " style="stroke:#181818;stroke-width:0.5;" fill="#FEFFDD"/><text lengthAdjust="spacing" x="844" font-size="13" textLength="179" y="477.4951" font-family="sans-serif" fill="#000000">This is an implied action based</text><text lengthAdjust="spacing" x="844" font-size="13" textLength="129" y="493.8467" font-family="sans-serif" fill="#000000">on the change of state</text></g>  <!-- link rejected to *end* --><g id="link_rejected_*end*"><path d="M965.53,422.24 C974.67,431.07 985.99,440.29 998,446 C1017.92,455.48 1032.71,437.19 1047,454 C1061.97,471.61 1055.97,484.7 1047,506 C1012.66,587.54 908.1,638.13 870.58,654.05 " style="stroke:#181818;stroke-width:1.0;" id="rejected-to-*end*" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="865.94,655.99,875.7864,656.21,870.5533,654.0619,872.7014,648.8287,865.94,655.99"/></g>  <!-- link RelatedPerson to *end* --><g id="link_RelatedPerson_*end*"><path d="M857,589.23 C857,607.23 857,630.61 857,645.34 " style="stroke:#181818;stroke-width:1.0;" id="RelatedPerson-to-*end*" fill="none"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="857,650.35,861,641.35,857,645.35,853,641.35,857,650.35"/></g></g></svg></figure>
<p><br clear="all"/></p>

<h3 id="view-a-relationship">View a relationship</h3>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
      <th>FHIR Interaction</th>
      <th>FHIR Profile</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>n/a</td>
      <td><a href="restful-api.html">RESTful API</a></td>
      <td><a name="l1292">​</a><a href="StructureDefinition-RelatedPerson">UKCore-RelatedPerson</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/View+a+relationship">Confluence Link</a></p>

<p>See <a href="#view-a-relationship">API Specification</a> below. Note is a potential change here due to the proposed modelling using Consent.</p>

<p>This could mean any of the following</p>

<ul>
  <li>Add _revinclude option on the GET /RelatedPerson API Consent.actor i.e. <code class="language-plaintext highlighter-rouge">GET /RelatedPerson?_revinclude=Consent.actor</code></li>
  <li>Add a GET /Consent/{id} API (really should be provided for <a href="#validate-a-relationship">Validate a relationship</a>) and GET /Consent? with query parameters
    <ul>
      <li>actor (searching for the person making the request)</li>
      <li>patient (search for consents for a patient)</li>
      <li>
        <h3 id="manage-the-lifecycle-of-a-relationship">Manage the lifecycle of a relationship</h3>
      </li>
    </ul>
  </li>
</ul>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 402 272" zoomAndPan="magnify" preserveAspectRatio="none" width="402px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:402px;height:272px;background:#FFFFFF;" version="1.1" height="272px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="125.5" font-size="14" textLength="148" y="34.5332" font-family="sans-serif" fill="#000000">Manage Relationship</text><ellipse cx="201" cy="58.6094" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;" fill="#222222"/><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="151.5,88.6094,250.5,88.6094,262.5,100.6094,250.5,112.6094,151.5,112.6094,139.5,100.6094,151.5,88.6094"/><text lengthAdjust="spacing" x="151.5" font-size="11" textLength="99" y="105.1104" font-family="sans-serif" fill="#000000">Mange Relationship?</text><rect rx="12.5" ry="12.5" width="221" x="11" y="150.2813" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="21" font-size="12" textLength="201" y="172.7383" font-family="sans-serif" fill="#000000">Manage the lifecycle of a relationship</text><rect rx="12.5" ry="12.5" width="139" x="252" y="150.2813" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="262" font-size="12" textLength="119" y="172.7383" font-family="sans-serif" fill="#000000">Revoke a relationship</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="201,195.375,201,195.375,213,207.375,201,219.375,201,219.375,189,207.375,201,195.375"/><ellipse cx="201" cy="250.375" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;" fill="none"/><ellipse cx="201" cy="250.375" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;" fill="#222222"/><line y1="100.6094" x1="139.5" y2="100.6094" style="stroke:#181818;stroke-width:1.0;" x2="121.5"/><line y1="100.6094" x1="121.5" y2="150.2813" style="stroke:#181818;stroke-width:1.0;" x2="121.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="117.5,140.2813,121.5,150.2813,125.5,140.2813,121.5,144.2813"/><text lengthAdjust="spacing" x="124.5" font-size="11" textLength="38" y="129.9463" font-family="sans-serif" fill="#000000">Manage</text><line y1="100.6094" x1="262.5" y2="100.6094" style="stroke:#181818;stroke-width:1.0;" x2="321.5"/><line y1="100.6094" x1="321.5" y2="150.2813" style="stroke:#181818;stroke-width:1.0;" x2="321.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="317.5,140.2813,321.5,150.2813,325.5,140.2813,321.5,144.2813"/><text lengthAdjust="spacing" x="324.5" font-size="11" textLength="36" y="129.9463" font-family="sans-serif" fill="#000000">Revoke</text><line y1="185.375" x1="121.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="121.5"/><line y1="207.375" x1="121.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="189"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="179,203.375,189,207.375,179,211.375,183,207.375"/><line y1="185.375" x1="321.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="321.5"/><line y1="207.375" x1="321.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="213"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="223,203.375,213,207.375,223,211.375,219,207.375"/><line y1="68.6094" x1="201" y2="88.6094" style="stroke:#181818;stroke-width:1.0;" x2="201"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="197,78.6094,201,88.6094,205,78.6094,201,82.6094"/><line y1="219.375" x1="201" y2="239.375" style="stroke:#181818;stroke-width:1.0;" x2="201"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="197,229.375,201,239.375,205,229.375,201,233.375"/></g></svg></figure>
<p><br clear="all"/></p>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://hl7.org/fhir/R4/workflow.html">FHIR Workflow</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Manage+the+lifecycle+of+a+relationship">Confluence Link</a></p>

<p>Would expect this to be a POST /Task from the GP and would follow a similar pattern to <a href="#validate-a-relationship">Validate a relationship</a></p>

<h3 id="revoke-a-relationship">Revoke a relationship</h3>

<figure>  <!-- ?xml version="1.0" encoding="us-ascii" standalone="no"? --><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 402 272" zoomAndPan="magnify" preserveAspectRatio="none" width="402px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:402px;height:272px;background:#FFFFFF;" version="1.1" height="272px"><defs/><g><text font-weight="bold" lengthAdjust="spacing" x="125.5" font-size="14" textLength="148" y="34.5332" font-family="sans-serif" fill="#000000">Manage Relationship</text><ellipse cx="201" cy="58.6094" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;" fill="#222222"/><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="151.5,88.6094,250.5,88.6094,262.5,100.6094,250.5,112.6094,151.5,112.6094,139.5,100.6094,151.5,88.6094"/><text lengthAdjust="spacing" x="151.5" font-size="11" textLength="99" y="105.1104" font-family="sans-serif" fill="#000000">Mange Relationship?</text><rect rx="12.5" ry="12.5" width="221" x="11" y="150.2813" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="21" font-size="12" textLength="201" y="172.7383" font-family="sans-serif" fill="#000000">Manage the lifecycle of a relationship</text><rect rx="12.5" ry="12.5" width="139" x="252" y="150.2813" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="35.0938"/><text lengthAdjust="spacing" x="262" font-size="12" textLength="119" y="172.7383" font-family="sans-serif" fill="#000000">Revoke a relationship</text><polygon style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" points="201,195.375,201,195.375,213,207.375,201,219.375,201,219.375,189,207.375,201,195.375"/><ellipse cx="201" cy="250.375" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;" fill="none"/><ellipse cx="201" cy="250.375" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;" fill="#222222"/><line y1="100.6094" x1="139.5" y2="100.6094" style="stroke:#181818;stroke-width:1.0;" x2="121.5"/><line y1="100.6094" x1="121.5" y2="150.2813" style="stroke:#181818;stroke-width:1.0;" x2="121.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="117.5,140.2813,121.5,150.2813,125.5,140.2813,121.5,144.2813"/><text lengthAdjust="spacing" x="124.5" font-size="11" textLength="38" y="129.9463" font-family="sans-serif" fill="#000000">Manage</text><line y1="100.6094" x1="262.5" y2="100.6094" style="stroke:#181818;stroke-width:1.0;" x2="321.5"/><line y1="100.6094" x1="321.5" y2="150.2813" style="stroke:#181818;stroke-width:1.0;" x2="321.5"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="317.5,140.2813,321.5,150.2813,325.5,140.2813,321.5,144.2813"/><text lengthAdjust="spacing" x="324.5" font-size="11" textLength="36" y="129.9463" font-family="sans-serif" fill="#000000">Revoke</text><line y1="185.375" x1="121.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="121.5"/><line y1="207.375" x1="121.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="189"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="179,203.375,189,207.375,179,211.375,183,207.375"/><line y1="185.375" x1="321.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="321.5"/><line y1="207.375" x1="321.5" y2="207.375" style="stroke:#181818;stroke-width:1.0;" x2="213"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="223,203.375,213,207.375,223,211.375,219,207.375"/><line y1="68.6094" x1="201" y2="88.6094" style="stroke:#181818;stroke-width:1.0;" x2="201"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="197,78.6094,201,88.6094,205,78.6094,201,82.6094"/><line y1="219.375" x1="201" y2="239.375" style="stroke:#181818;stroke-width:1.0;" x2="201"/><polygon style="stroke:#181818;stroke-width:1.0;" fill="#181818" points="197,229.375,201,239.375,205,229.375,201,233.375"/></g></svg></figure>
<p><br clear="all"/></p>

<table>
  <thead>
    <tr>
      <th>FHIR/IHE Framework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://hl7.org/fhir/R4/workflow.html">FHIR Workflow</a></td>
    </tr>
  </tbody>
</table>

<p><a href="https://nhsd-confluence.digital.nhs.uk/display/NPA/Revoke+a+relationship">Confluence Link</a></p>

<p>Would expect this to be a POST /Task from the GP to request the relationship is ended and would follow a similar pattern to <a href="#validate-a-relationship">Validate a relationship</a></p>

<h3 id="api-documentation-capabilitystatement">API Documentation (CapabilityStatement)</h3>

<ol>
  <li>
    <p><a name="l1501">​</a>Copy the JSON version of <a href="CapabilityStatement-Validated-Relationship-Service-Provider.html">CapabilityStatement-Validated-Relationship-Service-Provider</a></p>
  </li>
  <li>
    <p>Paste this into <a href="https://nhsdigital.github.io/IOPS-Validation-UI/api">FHIR Development (Experimental)</a></p>
  </li>
  <li>
    <p>Click ‘Refresh OAS’</p>
  </li>
  <li>
    <p>An OAS representation of the FHIR CapabilityStatement will be rendered on the right hand side of the screen.</p>
  </li>
  <li>
    <p>Click ‘Try it out’ to see an API demonstration.</p>
  </li>
</ol>

<div>
<img src="OAS-Documentation.png" alt="FHIR CapabilityStatement render using OAS/Swagger" width="60%"/>
<p>Figure 3 - FHIR CapabilityStatement render using OAS/Swagger</p>
<p></p>
</div>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &copy; 2024+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.england.nhs.uk/">NHS England</a>.  Package uk.nhs.england.skunkworks#0.0.1 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Mar 6, 2024 15:16+0000">2024-03-06</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
            <div style="color: #333333">

          Links: <a style="color: #81BEF7" href="toc.html">Table of Contents</a> |
                 <a style="color: #81BEF7" href="qa.html">QA Report</a> 
                 <a rel="license" style="color: #81BEF7" href="http://hl7.org/fhir/R4/license.html"><img src="cc0.png" alt="CC0" style="border-style: none;"/></a>
<div>
</div>

</div>
          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  </body>
</html>