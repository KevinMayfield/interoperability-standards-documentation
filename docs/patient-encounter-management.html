<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Patient Encounter Management - Health Administration Interoperability Standards - Skunkworks v0.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>


    <!--  <script src="assets/nhsuk.js" defer></script> -->

      <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<!-- Project extras
<link
        type="font/woff2"
        href="assets/fonts/FrutigerLTW01-55Roman.woff2"
        rel="preload"
        as="font"
        crossorigin
/>
<link
        type="font/woff2"
        href="assets/fonts/FrutigerLTW01-65Bold.woff2"
        rel="preload"
        as="font"
        crossorigin
/>
<link href="assets/css/nhsuk.css" rel="stylesheet" />
-->

<!-- Bootstrap core CSS overrides to bootstrap-fhir.css -->
<link href="assets/css/nhse.css" rel="stylesheet"/>



    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/favicons/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"16"}
    h3,h4,h5,h6{--heading-prefix:"16"}</style>
    <div id="segment-header" class="segment nhsuk-header">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<!-- Left logo - typically the publisher's logo - project or affiliate -->
        <div id="project-nav">
          <a id="project-logo" no-external="true" href="https://www.england.nhs.uk">
            <img height="61" alt="Project home" src="assets/images/skunk.png"/>
          </a>
        </div>

<!-- Right logo - for example the FHIR logo -->
<!-- Make sure you have authorization to use the FHIR logo -->

        <div id="family-nav">
            <!--
          <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="60" alt="FHIR website" src="assets/images/fhir-logo-www.png"/> </a>
          -->
        </div> 
      

<!-- search icon - if you want -->
<!--
        <div id="hl7-search">
          <a id="hl7-search-lnk" no-external="true" href="http://hl7.org/fhir/search.cfm"><img alt="Search FHIR" src="assets/images/search.png"/></a>
        </div>
-->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Health Administration Interoperability Standards - Skunkworks</span>
            <br/>
            <span style="display:inline-block;">0.0.1 - ci-build



   <img alt="England flag" src="assets/images/GB-ENG.svg" height="16" title="England"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="toc.html">Table of Contents</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Documentation
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="background.html">Background</a>
      </li>
      <li>
        <a href="interoperability-standards.html">Interoperability Standards</a>
      </li>
      <li>
        <a href="testing.html">Conformance and Testing (FHIR)</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Design
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="administration-module.html">Administration</a>
      </li>
      <li>
        <a href="validation.html">FHIR Validation</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Build
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="national-proxy-service.html">National Proxy Service</a>
      </li>
      <li>
        <a href="personal-demographics-service.html">NHS Number Allocation and PDS</a>
      </li>
      <li>
        <a href="patient-encounter-management.html">Patient Encounter Management</a>
      </li>
      <li>
        <a href="scheduling.html">Scheduling</a>
      </li>
      <li>
        <a href="patient-demographics-query.html">Patient Demographics Query</a>
      </li>
      <li>
        <a href="patient-identity-management.html">Patient Identity Management</a>
      </li>
      <li>
        <a href="booking.html">Booking</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">FHIR Assets</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>Patient Encounter Management</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Health Administration Interoperability Standards - Skunkworks - Local Development build (v0.0.1) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="https://fhir.nhs.uk/England/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Patient Encounter Management</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#querying-existing-data" id="markdown-toc-querying-existing-data">Querying Existing Data</a></li>
  <li><a href="#event-notifications" id="markdown-toc-event-notifications">Event Notifications</a>    <ul>
      <li><a href="#hl7-fhir-based-version-ihe-pem" id="markdown-toc-hl7-fhir-based-version-ihe-pem">HL7 FHIR based version IHE PEM</a></li>
      <li><a href="#hl7-v2-adtihe-pem" id="markdown-toc-hl7-v2-adtihe-pem">HL7 v2 ADT/IHE PEM</a></li>
      <li><a href="#hl7-fhir-and-v2-compatability" id="markdown-toc-hl7-fhir-and-v2-compatability">HL7 FHIR and v2 Compatability</a></li>
    </ul>
  </li>
  <li><a href="#pubsub" id="markdown-toc-pubsub">Pub/Sub</a></li>
  <li><a href="#use-cases" id="markdown-toc-use-cases">Use Cases</a>    <ul>
      <li><a href="#outpatient-clinic-attendance-notification" id="markdown-toc-outpatient-clinic-attendance-notification">Outpatient Clinic Attendance Notification</a></li>
      <li><a href="#discharge-inpatient-notification" id="markdown-toc-discharge-inpatient-notification">Discharge (Inpatient) Notification</a></li>
      <li><a href="#planned-admission-notification" id="markdown-toc-planned-admission-notification">Planned Admission Notification</a></li>
      <li><a href="#cpis-implementation-at-calderdale-and-huddersfield-nhs-foundation-trust" id="markdown-toc-cpis-implementation-at-calderdale-and-huddersfield-nhs-foundation-trust">CPIS Implementation at Calderdale and Huddersfield NHS Foundation Trust</a></li>
    </ul>
  </li>
</ul>

</div>

<p>This proposal originates from CPIS (and potentially Wayfinder) user requirements and describes options for enhancing <strong>Patient Encounter Management</strong> and also suggestions for depreciating this HL7 v2 ADT based event notification standard.</p>

<p>The suggestions are:</p>

<ul>
  <li>Querying Existing Data</li>
  <li>Event Notifications (Distribution List)
    <ul>
      <li>HL7 v2 ADT/IHE PEM</li>
      <li>HL7 FHIR version of IHE PEM</li>
    </ul>
  </li>
  <li>Pub/Sub (Event Notifications)</li>
</ul>

<p>The scope of this proposal is national, regional, NHS Trust and supplier.</p>

<h2 id="querying-existing-data">Querying Existing Data</h2>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="141px" preserveAspectRatio="none" style="width:343px;height:141px;background:#FFFFFF;" version="1.1" viewBox="0 0 343 141" width="343px" zoomAndPan="magnify"><defs /><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="44" x2="44" y1="37.6094" y2="134.6641" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="279.5" x2="279.5" y1="37.6094" y2="134.6641" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="12" y="26.5332">Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="221.5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="228.5" y="26.5332">Data Repository</text><polygon fill="#181818" points="267.5,82.3125,277.5,86.3125,267.5,90.3125,271.5,86.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="44.5" x2="273.5" y1="86.3125" y2="86.3125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="51.5" y="65.1045">Query Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="55.5" y="81.4561">GET /Encounter?{queryParameters}</text><polygon fill="#181818" points="55.5,112.6641,45.5,116.6641,55.5,120.6641,51.5,116.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="49.5" x2="278.5" y1="116.6641" y2="116.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="61.5" y="111.8076">Matching Encounters</text></g></svg></figure>
<p><br clear="all" /></p>

<table>
  <tbody>
    <tr>
      <td><strong>FHIR Resource</strong></td>
      <td><strong>FHIR Profile</strong></td>
      <td><strong>Interaction</strong></td>
    </tr>
    <tr>
      <td>Encounter</td>
      <td><a href="StructureDefinition-Encounter.html">NHSEngland-Encounter</a> based on UKCore-Encounter</td>
      <td>See <a href="CapabilityStatement-NHSEnglandPatientEncounterManagementProvider.html">NHS England Patient Encounter Management</a></td>
    </tr>
  </tbody>
</table>

<p>This includes defining a base set of query parameters which should be followed by suppliers and NHS England programmes.  both <a href="https://build.fhir.org/ig/IHE/QEDm/branches/master/PCC-44.html#234441218-encounters-option-search-parameters">IHE Query for Existing Data for Mobile (QEDm)</a> and also <a href="https://build.fhir.org/ig/HL7/US-Core/StructureDefinition-us-core-encounter.html">US Core Encounter - Mandatory search parameters</a>.
The initial proposal can be found here <a href="CapabilityStatement-NHSEnglandPatientEncounterManagementProvider.html">NHS England Patient Encounter Management</a>, this is based on similar requirement in  both <a href="https://build.fhir.org/ig/IHE/QEDm/branches/master/PCC-44.html#234441218-encounters-option-search-parameters">IHE Query for Existing Data for Mobile (QEDm)</a> and also <a href="https://build.fhir.org/ig/HL7/US-Core/StructureDefinition-us-core-encounter.html">US Core Encounter - Mandatory search parameters</a>
Suppliers and NHS England programmes can build on this base API but SHOULD also adhere to the base API definition.</p>

<h2 id="event-notifications">Event Notifications</h2>

<p>NHS England has not produced any guidance around replacing HL7 v2 ADT/IHE PEM. NHS England has instead focused on the transfer of Encounter/Episode clinical documentation, which includes</p>

<ul>
  <li>Transfer of Care</li>
  <li>Digital Medicines</li>
  <li>Assessment Discharge and Withdrawal</li>
</ul>

<p>These are likely to be refactored to use document sharing API’s such as those provided by NHS Englands National Record Locator Service and IHE XDS/XDSonFHIR Cross Enterprise Document Sharing. 
It is likely this will create use cases to notify interested parties of events such as:</p>

<ul>
  <li>A discharge or outpatient letter has been created <a href="https://build.fhir.org/ig/IHE/ITI.DSUBm/branches/master/index.html">IHE Document Subscription for Mobile (DSUBm)</a></li>
  <li>Patient admission, discharge or transfer notifications - From a workflow perspective it is important to let other providers know the patients current status is (rather than the status of the clinical record which can follow upto 48 hours after the patient has been discharged).</li>
</ul>

<p>Options for solving the latter, which is the use case for <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-14.html#14.5.2">IHE Patient Encounter Management</a> are:</p>
<ul>
  <li>(New) HL7 FHIR version IHE PEM</li>
  <li>(Existing) HL7 v2 ADT version of IHE PEM</li>
</ul>

<h3 id="hl7-fhir-based-version-ihe-pem">HL7 FHIR based version IHE PEM</h3>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="249px" preserveAspectRatio="none" style="width:810px;height:249px;background:#FFFFFF;" version="1.1" viewBox="0 0 810 249" width="810px" zoomAndPan="magnify"><defs /><g><rect fill="none" height="127.7578" style="stroke:#000000;stroke-width:1.5;" width="794" x="10" y="97.9609" /><rect fill="none" height="65.0547" style="stroke:#000000;stroke-width:1.5;" width="428" x="366" y="153.6641" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="37.6094" y2="242.7188" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="418" x2="418" y1="37.6094" y2="242.7188" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="744" x2="744" y1="37.6094" y2="242.7188" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="20" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="27" y="26.5332">Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="376" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="383" y="26.5332">Middleware</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="705" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="712" y="26.5332">Consumer</text><line style="stroke:#181818;stroke-width:1.0;" x1="49.5" x2="91.5" y1="69.9609" y2="69.9609" /><line style="stroke:#181818;stroke-width:1.0;" x1="91.5" x2="91.5" y1="69.9609" y2="82.9609" /><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="91.5" y1="82.9609" y2="82.9609" /><polygon fill="#181818" points="60.5,78.9609,50.5,82.9609,60.5,86.9609,56.5,82.9609" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="355" x="56.5" y="65.1045">Patient is pre-admitted, admitted, discharged, transferred, etc</text><path d="M10,97.9609 L75,97.9609 L75,106.3125 L65,116.3125 L10,116.3125 L10,97.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="127.7578" style="stroke:#000000;stroke-width:1.5;" width="794" x="10" y="97.9609" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="25" y="112.4561">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="90" y="111.3799">[is an event trigger]</text><polygon fill="#181818" points="406.5,134.6641,416.5,138.6641,406.5,142.6641,410.5,138.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="49.5" x2="412.5" y1="138.6641" y2="138.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="56.5" y="133.8076">Encounter Event Notification</text><path d="M366,153.6641 L439,153.6641 L439,162.0156 L429,172.0156 L366,172.0156 L366,153.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="65.0547" style="stroke:#000000;stroke-width:1.5;" width="428" x="366" y="153.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="381" y="168.1592">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="115" x="454" y="167.083">[for each Consumer]</text><polygon fill="#181818" points="732.5,206.7188,742.5,210.7188,732.5,214.7188,736.5,210.7188" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="738.5" y1="210.7188" y2="210.7188" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="425.5" y="189.5107">Encounter Event notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="429.5" y="205.8623">PUT /Encounter?identifier={identifier} or HL7 v2 ADT</text></g></svg></figure>
<p><br clear="all" /></p>

<table>
  <tbody>
    <tr>
      <td><strong>FHIR Resource</strong></td>
      <td><strong>FHIR Profile</strong></td>
      <td><strong>Interaction</strong></td>
    </tr>
    <tr>
      <td>Encounter</td>
      <td><a href="StructureDefinition-Encounter.html">NHSEngland-Encounter</a> based on UKCore-Encounter</td>
      <td><code class="language-plaintext highlighter-rouge">PUT /Encounter?identifier={system |}[code]</code></td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PUT /Encounter?identifier=https://fhir.leedsth.nhs.uk/VisitId|2141
</code></pre></div></div>

<p>This recommendation is influenced by the interaction used in IHE PIXm and so is similarly an ‘upsert’: which means amend (PUT) the existing resource if it doesn’t exist else create (POST) it, note this is reliant on the visit identifier being present.</p>

<p>Examples below are based on existing examples from NHS England HL7 v2 ADT specifications.</p>

<ul>
  <li><a href="Encounter-Encounter-inpatient-discharge-fredrica-smith.html">Example FHIR Encounter - Inpatient Discharge Notification Fredrica Smith</a></li>
  <li><a href="Encounter-Encounter-outpatient-fredrica-smith.html">Example FHIR Encounter - Outpatient Fredrica Smith</a></li>
  <li><a href="Encounter-Encounter-pre-admission-fredrica-smith.html">Example FHIR Encounter - Pre Admission Notification Fredrica Smith</a></li>
</ul>

<p>These events notifications focus only on the workflow notification and so unlike Transfer of Care, they do not contain clinical information.<br />
They will contain enough metadata such as the patient NHS Number and the identifier of the Encounter, for this detailed clinical information to be retrieved. The API to be used to obtain the clinical information will vary and this notification is decoupled from those API’s.</p>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="430px" preserveAspectRatio="none" style="width:622px;height:430px;background:#FFFFFF;" version="1.1" viewBox="0 0 622 430" width="622px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="361" x="126.5" y="29.5332">Patient Encounter Notifications and Record Sharing</text><rect fill="none" height="111.7578" style="stroke:#000000;stroke-width:1.5;" width="595" x="10" y="171.5313" /><rect fill="none" height="65.0547" style="stroke:#000000;stroke-width:1.5;" width="595" x="10" y="341.6406" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="126" x2="126" y1="93.8281" y2="423.6953" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="497" x2="497" y1="93.8281" y2="423.6953" /><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="212" x="20" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="43" y="65.1426">Patient Encounter Source</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="198" x="27" y="82.752">(e.g. Electronic Patient Record)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="399" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="406" y="82.752">Patient Encounter Consumer</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="615" x="0" y="133.1797" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="615" y1="133.1797" y2="133.1797" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="615" y1="136.1797" y2="136.1797" /><rect fill="#EEEEEE" height="40.7031" style="stroke:#000000;stroke-width:2.0;" width="496" x="59.5" y="113.8281" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="285" x="65.5" y="131.3232">This can be replaced by HL7 v2 ADT/IHE PEM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="482" x="65.5" y="147.6748">(recommended: NHS England IHE PEM/HL7 v2 ADT Messaging Specification)</text><path d="M10,171.5313 L83,171.5313 L83,179.8828 L73,189.8828 L10,189.8828 L10,171.5313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="111.7578" style="stroke:#000000;stroke-width:1.5;" width="595" x="10" y="171.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="186.0264">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="284" x="98" y="184.9502">[for all key events/changes on the patients journey]</text><polygon fill="#181818" points="485,240.9375,495,244.9375,485,248.9375,489,244.9375" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="126" x2="491" y1="244.9375" y2="244.9375" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="133" y="207.3779">Patient admitted, discharged, transferred, etc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="133" y="223.7295">Patient Encounter Feed HL7 FHIR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="137" y="240.0811">POST /Encounter or PUT /Encounter?identifier={visitId}</text><polygon fill="#181818" points="137,271.2891,127,275.2891,137,279.2891,133,275.2891" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131" x2="496" y1="275.2891" y2="275.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="143" y="270.4326">Acknowledgement</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="615" x="0" y="311.4648" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="615" y1="311.4648" y2="311.4648" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="615" y1="314.4648" y2="314.4648" /><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="401" x="107" y="300.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="383" x="113" y="317.7842">Should the consumer require clinical data they can ask for it</text><path d="M10,341.6406 L83,341.6406 L83,349.9922 L73,359.9922 L10,359.9922 L10,341.6406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="65.0547" style="stroke:#000000;stroke-width:1.5;" width="595" x="10" y="341.6406" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="356.1357">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="98" y="355.0596">[as required]</text><polygon fill="#181818" points="137,394.6953,127,398.6953,137,402.6953,133,398.6953" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="131" x2="496" y1="398.6953" y2="398.6953" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="143" y="377.4873">Retrieve clinical data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="343" x="147" y="393.8389">IHE XDS/MHD/QEDm, IPS/IPA, NRL, GP Connect/IM1, etc</text></g></svg></figure>
<p><br clear="all" /></p>

<h3 id="hl7-v2-adtihe-pem">HL7 v2 ADT/IHE PEM</h3>

<p>For details see</p>

<ul>
  <li><a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-14.html#14.5.2">IHE Patient Encounter Management</a></li>
  <li><a href="HSCIC ITK HL7 V2 Message Specifications.pdf" target="_blank">NHS England (ADT) ITK HL7 v2 (2.4) Message Specification</a></li>
</ul>

<h4 id="background">Background</h4>

<p>A typical NHS Acute will use Trust Integration Engine (TIE) to route these existing messages as follows:</p>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="307px" preserveAspectRatio="none" style="width:718px;height:307px;background:#FFFFFF;" version="1.1" viewBox="0 0 718 307" width="718px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="293" x="214" y="29.5332">Patient Encounter Management (IHE PEM)</text><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="427" x="285" y="187.8828" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="145" x2="145" y1="93.8281" y2="300.2891" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="395" x2="395" y1="93.8281" y2="300.2891" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604" x2="604" y1="93.8281" y2="300.2891" /><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="5" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="62" y="65.1426">Patient Encounter Source</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="12" y="82.752">(e.g. Patient Administration System (PAS))</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="295" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="302" y="65.1426">Trust Integration Engine (TIE)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="320" y="82.752">or Orchestration Engine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="506" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="513" y="82.752">Patient Encounter Consumer</text><polygon fill="#181818" points="383.5,138.5313,393.5,142.5313,383.5,146.5313,387.5,142.5313" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="145" x2="389.5" y1="142.5313" y2="142.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="152" y="121.3232">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="156" y="137.6748">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="156,168.8828,146,172.8828,156,176.8828,152,172.8828" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="394.5" y1="172.8828" y2="172.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="162" y="168.0264">Acknowledgement</text><path d="M285,187.8828 L358,187.8828 L358,196.2344 L348,206.2344 L285,206.2344 L285,187.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="427" x="285" y="187.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="300" y="202.3779">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="230" x="373" y="201.3018">[for each recipient (fixed distribution list)]</text><polygon fill="#181818" points="592,240.9375,602,244.9375,592,248.9375,596,244.9375" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="598" y1="244.9375" y2="244.9375" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="402.5" y="223.7295">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="406.5" y="240.0811">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="406.5,271.2891,396.5,275.2891,406.5,279.2891,402.5,275.2891" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="400.5" x2="603" y1="275.2891" y2="275.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="412.5" y="270.4326">Acknowledgement</text></g></svg></figure>
<p><br clear="all" /></p>

<ul>
  <li>The PAS system emits event notifications to the TIE based on a series of triggers, these are typically:
    <ul>
      <li>Patient admissions</li>
      <li>Outpatient/Emergency attendance</li>
      <li>Ward Transfers (inpatient)</li>
      <li>Discharges (inpatient, outpatient and emergency)</li>
    </ul>
  </li>
  <li>The TIE then distributes these events to other systems in the NHS Trusts. This can include external providers such as GP systems.</li>
</ul>

<h3 id="hl7-fhir-and-v2-compatability">HL7 FHIR and v2 Compatability</h3>

<p>It is recommended these interactions are compatible with HL7 v2 ADT/IHE PEM due to the high levels adoption of HL7 v2 ADT in the English NHS.</p>

<p>The use of either option is likely be used in the same event flows as the other, e.g.</p>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="432px" preserveAspectRatio="none" style="width:744px;height:432px;background:#FFFFFF;" version="1.1" viewBox="0 0 744 432" width="744px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="293" x="227.25" y="29.5332">Patient Encounter Management (IHE PEM)</text><rect fill="none" height="220.6484" style="stroke:#000000;stroke-width:1.5;" width="463.5" x="275" y="187.8828" /><rect fill="none" height="188.2969" style="stroke:#000000;stroke-width:1.5;" width="443.5" x="285" y="213.2344" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="145" x2="145" y1="93.8281" y2="425.5313" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="395" x2="395" y1="93.8281" y2="425.5313" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="620.5" x2="620.5" y1="93.8281" y2="425.5313" /><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="5" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="62" y="65.1426">Patient Encounter Source</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="12" y="82.752">(e.g. Patient Administration System (PAS))</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="295" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="302" y="65.1426">Trust Integration Engine (TIE)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="320" y="82.752">or Orchestration Engine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="522.5" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="529.5" y="82.752">Patient Encounter Consumer</text><polygon fill="#181818" points="383.5,138.5313,393.5,142.5313,383.5,146.5313,387.5,142.5313" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="145" x2="389.5" y1="142.5313" y2="142.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="152" y="121.3232">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="156" y="137.6748">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="156,168.8828,146,172.8828,156,176.8828,152,172.8828" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="394.5" y1="172.8828" y2="172.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="162" y="168.0264">Acknowledgement</text><path d="M275,187.8828 L348,187.8828 L348,196.2344 L338,206.2344 L275,206.2344 L275,187.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="220.6484" style="stroke:#000000;stroke-width:1.5;" width="463.5" x="275" y="187.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="290" y="202.3779">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105" x="363" y="201.3018">[for each recipient]</text><path d="M285,213.2344 L346,213.2344 L346,221.5859 L336,231.5859 L285,231.5859 L285,213.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="188.2969" style="stroke:#000000;stroke-width:1.5;" width="443.5" x="285" y="213.2344" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="300" y="227.7295">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="50" x="361" y="226.6533">[internal]</text><polygon fill="#181818" points="608.5,266.2891,618.5,270.2891,608.5,274.2891,612.5,270.2891" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="614.5" y1="270.2891" y2="270.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="402.5" y="249.0811">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="406.5" y="265.4326">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="406.5,296.6406,396.5,300.6406,406.5,304.6406,402.5,300.6406" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="400.5" x2="619.5" y1="300.6406" y2="300.6406" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="412.5" y="295.7842">Acknowledgement</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="285" x2="728.5" y1="309.6406" y2="309.6406" /><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="271" x="290" y="321.0596">[external (e.g. Social Services, Primary Care, etc)]</text><polygon fill="#181818" points="608.5,359.1797,618.5,363.1797,608.5,367.1797,612.5,363.1797" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="614.5" y1="363.1797" y2="363.1797" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="402.5" y="341.9717">Patient Encounter Feed HL7 FHIR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="406.5" y="358.3232">POST /Encounter</text><polygon fill="#181818" points="406.5,389.5313,396.5,393.5313,406.5,397.5313,402.5,393.5313" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="400.5" x2="619.5" y1="393.5313" y2="393.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="412.5" y="388.6748">Acknowledgement</text></g></svg></figure>
<p><br clear="all" /></p>

<p>This diagram shows a NHS Trust continuing to use it’s HL7 v2 ADT/IHE PEM system but it also starts to use the HL7 FHIR when working with external providers (e.g. primary, community and social care).</p>

<p>It is recommended that the data model in HL7 v2 is retained in HL7 FHIR to simplify the transform and so keep the solution simple. 
This may also improve adoption as both the v2 and FHIR versions are compatible with each othe</p>

<h2 id="pubsub">Pub/Sub</h2>

<p>At present this proposal is based on requirement from CPIS, the number of providers interested is probably more than just Social Services Safeguarding. As mentioned GP, Community, Mental Health teams may be also interested in these events. It is not a fixed list of interested parties and so is would likely use <a href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html">Publish-Subscribe Channel</a> patterns.</p>

<p>This is the approach taken in</p>

<ul>
  <li><a href="https://profiles.ihe.net/ITI/PMIR/">IHE Patient Master Identity Registry (PMIR)</a> which could potentially be used with PDS for Patient Demographics notifications
    <ul>
      <li>Note this doesn’t use the <strong>Subscriptions R5 Backport</strong></li>
    </ul>
  </li>
  <li><a href="https://build.fhir.org/ig/IHE/ITI.DSUBm/branches/master/index.html">IHE Document Subscription for Mobile (DSUBm)</a> which could potentially be used NRL for pointer notifications and IHE XDS/MHD for document notifications.
    <ul>
      <li>This makes use of the <strong>Subscriptions R5 Backport</strong>
E.g.</li>
    </ul>
  </li>
</ul>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="399px" preserveAspectRatio="none" style="width:626px;height:399px;background:#FFFFFF;" version="1.1" viewBox="0 0 626 399" width="626px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="337" x="146" y="29.5332">Patient Encounter Feed with FHIR Subscriptions</text><rect fill="none" height="204.8125" style="stroke:#000000;stroke-width:1.5;" width="610" x="10" y="170.2734" /><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="391" x="219" y="272.6797" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="108" x2="108" y1="76.2188" y2="392.0859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="305" x2="305" y1="76.2188" y2="392.0859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="502" x2="502" y1="76.2188" y2="392.0859" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="20" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="27" y="65.1426">Patient Encounter Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="229" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="236" y="65.1426">Subscription Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="404" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="411" y="65.1426">Patient Encounter Consumer</text><polygon fill="#181818" points="316,120.9219,306,124.9219,316,128.9219,312,124.9219" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="310" x2="501" y1="124.9219" y2="124.9219" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="322" y="103.7139">Resource Subscription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="322" y="120.0654">IHE DSUBm ITI-110</text><polygon fill="#181818" points="490,151.2734,500,155.2734,490,159.2734,494,155.2734" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="305" x2="496" y1="155.2734" y2="155.2734" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="312" y="150.417">Acknowledgement</text><path d="M10,170.2734 L75,170.2734 L75,178.625 L65,188.625 L10,188.625 L10,170.2734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="204.8125" style="stroke:#000000;stroke-width:1.5;" width="610" x="10" y="170.2734" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="25" y="184.7686">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="90" y="183.6924">[No matching Patient]</text><polygon fill="#181818" points="293,223.3281,303,227.3281,293,231.3281,297,227.3281" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="299" y1="227.3281" y2="227.3281" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="115" y="206.1201">Resource Publish</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="115" y="222.4717">Similar to IHE DSUBm ITI-111</text><polygon fill="#181818" points="119,253.6797,109,257.6797,119,261.6797,115,257.6797" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="113" x2="304" y1="257.6797" y2="257.6797" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="125" y="252.8232">Response</text><path d="M219,272.6797 L292,272.6797 L292,281.0313 L282,291.0313 L219,291.0313 L219,272.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="391" x="219" y="272.6797" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="234" y="287.1748">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="307" y="286.0986">[for each matching Subscription]</text><polygon fill="#181818" points="490,325.7344,500,329.7344,490,333.7344,494,329.7344" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="496" y1="329.7344" y2="329.7344" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="312" y="308.5264">Resource Notify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="312" y="324.8779">Similar to IHE DSUBm ITI-112</text><polygon fill="#181818" points="316,356.0859,306,360.0859,316,364.0859,312,360.0859" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="310" x2="501" y1="360.0859" y2="360.0859" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="322" y="355.2295">Acknowledgement</text></g></svg></figure>
<p><br clear="all" /></p>

<ol>
  <li>The Patient Encounter Consumer (e.g. Social Services Safeguarding) creates a <a href="Subscription-Subscription-ex-Encounter.html">Subscription for patient with a NHS Number of 3333333333</a></li>
  <li>The Patient Encounter Source (e.g. an Acute NHS Trust) sends a <a href="Bundle-Bundle-ex-ResourcePublish.html">Resource Publish Transaction Bundle</a> to the Subscription Manager.</li>
  <li>The Subscription Manager checks for matching subscriptions</li>
  <li>For each matching Subscription it sends a <a href="Bundle-Bundle-ex-EventNotification.html">Resource Notify Event Notifiction</a></li>
</ol>

<p>The example above used a <code class="language-plaintext highlighter-rouge">REST-Hook</code> Subscription, the <a href="https://hl7.org/fhir/uv/subscriptions-backport/STU1.1/channels.html">Subscriptions R5 Backport</a> has several channels including:</p>

<ul>
  <li>REST-Hook (assumed to be default)</li>
  <li>Websocket</li>
  <li>Email (probably also a common option)</li>
  <li>FHIR Messaging</li>
  <li>Custom Channels</li>
</ul>

<h2 id="use-cases">Use Cases</h2>

<h3 id="outpatient-clinic-attendance-notification">Outpatient Clinic Attendance Notification</h3>

<h4 id="use-case">Use Case</h4>

<p><code class="language-plaintext highlighter-rouge">Mrs Smith is discharged from her hospital provider spell. The discharge reports 2 observations from the hospital provider spell. The first is a weight measurement and the second a blood pressure. She is discharged with no follow up required, and returns home.</code></p>

<h4 id="hl7-fhir-encounter-example">HL7 FHIR Encounter Example</h4>

<ul>
  <li><a href="Encounter-Encounter-outpatient-fredrica-smith.html">Example FHIR Encounter - Outpatient Fredrica Smith</a></li>
</ul>

<h4 id="hl7-v2-adt_a04-example">HL7 v2 ADT_A04 Example</h4>

<p>An example HL7 v2 ADT_A04 is shown below, this is from <a href="HSCIC ITK HL7 V2 Message Specifications.pdf" target="_blank">NHS England (ADT) ITK HL7 v2 (2.4) Message Specification</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MSH|^~\&amp;|PAS|RCB|ROUTE|ROUTE|201011011512||ADT^A04^ADT_A01|14038913245354|P|2.4||201011011512|||GBR|UNICODE|EN||iTKv1.0
EVN||201011011512|||111111111^Cortana^Emily^^Miss^^RCB55|201001111512
PID|1||3333333333^^^NHS||SMITH^FREDRICA^J^^MRS^^L|SCHMIDT^HELGAR^Y|196512131515|2|||29 WEST AVENUE^BURYTHORPE^MALTON^NORTH YORKSHIRE^YO32 5TT^GBR^H||+441234567890||EN|M|C22|||||A|Berlin|||GBR||DEU
PD1|||MALTON GP PRACTICE^^Y06601|G5612908^Townley^Gregory^^^Dr^^^GMC
NK1|2|SMITH^FRANCESCA^^^MRS^^L|16|29 WEST AVENUE^BURYTHORPE^MALTON^NORTH YORKSHIRE^YO32 5TT^GBR^H|+441234567890||||||||||1|196311111513||||EN
PV1|57|O|West Wing^RCB-AWRD^BED2^RCB55|13|||C3456789^Darwin^Samuel^^^Dr^^^GMC|G5612908^Townley^Gregory^^^Dr^^^GMC|C3456789^Darwin^Samuel^^^Dr^^^GMC|300||||19|||C3456789^Darwin^Samuel^^^Dr^^^GMC|OUTPATIENT|2141^^^VISITID|||||||||||||||||||||||||201011011600
AL1|1|DA|Z88.5|5||199807011755
PR1|56||U19.2^24 hour ambulatory electrocardiography^OPCS4||201011011512|D|1440|||||C3456789^Darwin^Samuel^^^Dr^^^GMC|C3
ZU1||2|C|201011011530||300||||1|||GP|2|201011011624|201011011620|02|Y|0
</code></pre></div></div>

<h3 id="discharge-inpatient-notification">Discharge (Inpatient) Notification</h3>

<h4 id="use-case-1">Use Case</h4>

<p><code class="language-plaintext highlighter-rouge">Mrs Smith is being admitted to hospital following a referral by her GP Dr Townley of the Malton GP Practice. She arrives at York hospital by car, and is put under the care of Dr. Darwin, who also attends to Mrs Smith. Mrs Smith is admitted for an inpatient spell under the speciality General Medicine. She has a recorded allergy to an anaesthetic agent and has been diagnosed with stress incontinence. A colonic examination procedure is then performed.</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Given
Mrs Smith is admitted to hospital
And
a referral has been made by GP Dr Townley of the Malton GP Practice
When
she arrives at York hospital by car
And
is put under the care of Dr. Darwin, who also attends to Mrs Smith
And
has a recorded allergy to an anaesthetic agent and has been diagnosed with stress incontinence.
Then
Mrs Smith is admitted for an inpatient spell under the speciality General Medicine
And
a colonic examination procedure is then performed.
</code></pre></div></div>

<h4 id="hl7-fhir-encounter-example-1">HL7 FHIR Encounter Example</h4>

<ul>
  <li><a href="Encounter-Encounter-inpatient-discharge-fredrica-smith.html">Example FHIR Encounter - Inpatient Discharge Notification Fredrica Smith</a></li>
</ul>

<h4 id="hl7-v2-adt_a03-example">HL7 v2 ADT_A03 Example</h4>

<p>An example HL7 v2 ADT_A03 is shown below, this is from <a href="HSCIC ITK HL7 V2 Message Specifications.pdf" target="_blank">NHS England (ADT) ITK HL7 v2 (2.4) Message Specification</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MSH|^~\&amp;|PAS|RCB|ROUTE|ROUTE|201010211706||ADT^A03^ADT_A03|13403893338056|P|2.4|1|20101021185800|||GBR|UNICODE|EN||iTKv1.0
EVN||201010211735|||111111111^Cortana^Emily^^^Miss^^RCB55|201010211706
PID|1||3333333333^^^NHS||SMITH^FREDRICA^J^^MRS^^L|SCHMIDT^HELGAR^Y|196512131515|2|||29 WEST AVENUE^BURYTHORPE^MALTON^NORTH YORKSHIRE^YO32 5TT^GBR^H||+441234567890||en|M|C22|||||A|Berlin|||GBR||DEU
PD1|||MALTON GP PRACTICE^^Y06601|G5612908^Townley^Gregory^^^Dr^^^GMC
PV1|1|I|RCB^OBS1^BAY2-6^RCB55|13|||C3456789^Darwin^Samuel^^^Dr^^^GMC|G5612908^Townley^Gregory^^^Dr^^^GMC|C3456789^Darwin^Samuel^^^Dr^^^GMC|300||||||||12|YOR123456^^^YR_VISIT|||||||||||||||||3|19|01||||||201010201716|201010211706
PV2|||ADMIT13|||||||||||||||||||||||||||||||||||C
OBX|1|CE|ID1234567890||CODE6^FTCAREADD^CODE_SYSTEM|kg||N|||Confirmed|||201010180804||C3456789
OBX|2|CE|ID1234564440||CODE7^MADE_UP_CODE_7^CODE_SYSTEM|mmHg||N|||Confirmed|||201010201038||C3456789
ZU1|201010071234|1|C|201010091300|201010211706|500|||||||||201010081200|201010081156|02|Y|0
ZU3|004|03|5|||||normal|8b||1|1
ZU4||201010081756|20101009
ZU8|Z|1|No
</code></pre></div></div>

<h3 id="planned-admission-notification">Planned Admission Notification</h3>

<h4 id="use-case-2">Use Case</h4>

<p><code class="language-plaintext highlighter-rouge">Following Mrs Smith's first antenatal assessment, a due date for her baby was estimated by her consulting doctor Dr Darwin. This due date was used in order pre-admit the patient so that she was provisionally booked to attend York Hospital for her delivery.</code></p>

<h4 id="hl7-fhir-encounter-example-2">HL7 FHIR Encounter Example</h4>

<ul>
  <li><a href="Encounter-Encounter-pre-admission-fredrica-smith.html">Example FHIR Encounter - Pre Admission Notification Fredrica Smith</a></li>
</ul>

<p>In FHIR R5 Encounter.period is split into actual Period, plannedStartDate and plannedEndDate. This example suggests backporting the plannedStartDate/plannedEndDate as an extension.</p>

<h4 id="hl7-v2-adt_a05-example">HL7 v2 ADT_A05 Example</h4>

<p>An example HL7 v2 ADT_A05 is shown below, this is from <a href="HSCIC ITK HL7 V2 Message Specifications.pdf" target="_blank">NHS England (ADT) ITK HL7 v2 (2.4) Message Specification</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MSH|^~\&amp;|PAS|RCB|ROUTE|ROUTE|201008021530||ADT^A05^ADT_A05|13403891320453338090|P|2.4|0|20100802141857|||GBR|UNICODE|EN||iTKv1.0
EVN||201008021530|||111111111^Cortana^Emily^^Miss^^RCB55|201008021530
PID|1||3333333333^^^NHS||SMITH^FREDRICA^J^^MRS^^L|SCHMIDT^HELGAR^Y|196512131515|2|||29 WEST AVENUE^BURYTHORPE^MALTON^NORTH YORKSHIRE^YO32 5TT^GBR^H||+441234567890||EN|M|C22|||||A|Berlin|N||GBR||DEU||||ED
PD1|||MALTON GP PRACTICE^^Y06601|G5612908^Townley^Gregory^^^Dr^^^GMC
PV1|61|O|RCB^MATWRD|82||||||500||||79|B6|||Pregnant|4532^^^VISITID
PV2|||Labour|||||201009300000|201010010000||||||||||||||||2|||||||||||||C
AL1|1|DA|Z88.5|5||199807011755
ZU3|004||||||||8b||1
ZU6||201008021530|2|||4||5
ZU8|U|1|Yes
</code></pre></div></div>

<h3 id="cpis-implementation-at-calderdale-and-huddersfield-nhs-foundation-trust">CPIS Implementation at Calderdale and Huddersfield NHS Foundation Trust</h3>

<p>CHFT were the first NHS Trust to implement the HL7 v3 CPIS version of CPIS. They created a <a href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/WireTap.html">wire tap</a> in the TIE which call CPIS based on certain conditions (e.g. emergency encounter and female patient).</p>

<p>CHFT decided not to use CPIS interactively, i.e. a practitioner would choose to call CPIS in an application. This meant that the practitioners work was uninterupted as the check was automated and at busy times especially in emergency settings, these checks may cause delays in care.
This also ensured that every patient would be checked.</p>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="463px" preserveAspectRatio="none" style="width:1135px;height:463px;background:#FFFFFF;" version="1.1" viewBox="0 0 1135 463" width="1135px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="290" x="424" y="29.5332">Patient Encounter Management with CPIS</text><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="427" x="285" y="187.8828" /><rect fill="none" height="141.7578" style="stroke:#000000;stroke-width:1.5;" width="854" x="275" y="297.2891" /><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="834" x="285" y="352.9922" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="145" x2="145" y1="93.8281" y2="456.0469" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="395" x2="395" y1="93.8281" y2="456.0469" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604" x2="604" y1="93.8281" y2="456.0469" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="734" x2="734" y1="93.8281" y2="456.0469" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="837" x2="837" y1="93.8281" y2="456.0469" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1013" x2="1013" y1="93.8281" y2="456.0469" /><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="5" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="62" y="65.1426">Patient Encounter Source</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="12" y="82.752">(e.g. Patient Administration System (PAS))</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="295" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="302" y="65.1426">Trust Integration Engine (TIE)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="320" y="82.752">or Orchestration Engine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="506" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="513" y="82.752">Patient Encounter Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="712" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="719" y="82.752">CPIS</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="767" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="774" y="82.752">CHFT Safeguarding</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="917" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="924" y="82.752">Social Service Safeguarding</text><polygon fill="#181818" points="383.5,138.5313,393.5,142.5313,383.5,146.5313,387.5,142.5313" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="145" x2="389.5" y1="142.5313" y2="142.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="152" y="121.3232">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="156" y="137.6748">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="156,168.8828,146,172.8828,156,176.8828,152,172.8828" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="394.5" y1="172.8828" y2="172.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="162" y="168.0264">Acknowledgement</text><path d="M285,187.8828 L358,187.8828 L358,196.2344 L348,206.2344 L285,206.2344 L285,187.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="427" x="285" y="187.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="300" y="202.3779">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105" x="373" y="201.3018">[for each recipient]</text><polygon fill="#181818" points="592,240.9375,602,244.9375,592,248.9375,596,244.9375" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="598" y1="244.9375" y2="244.9375" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="402.5" y="223.7295">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="406.5" y="240.0811">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="406.5,271.2891,396.5,275.2891,406.5,279.2891,402.5,275.2891" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="400.5" x2="603" y1="275.2891" y2="275.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="412.5" y="270.4326">Acknowledgement</text><path d="M275,297.2891 L336,297.2891 L336,305.6406 L326,315.6406 L275,315.6406 L275,297.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="141.7578" style="stroke:#000000;stroke-width:1.5;" width="854" x="275" y="297.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="290" y="311.7842">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="351" y="310.708">[Check CPIS]</text><polygon fill="#181818" points="722.5,333.9922,732.5,337.9922,722.5,341.9922,726.5,337.9922" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="728.5" y1="337.9922" y2="337.9922" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="402.5" y="333.1357">Check CPIS</text><path d="M285,352.9922 L346,352.9922 L346,361.3438 L336,371.3438 L285,371.3438 L285,352.9922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="834" x="285" y="352.9922" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="300" y="367.4873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118" x="361" y="366.4111">[if CPIS record found]</text><polygon fill="#181818" points="825,389.6953,835,393.6953,825,397.6953,829,393.6953" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="831" y1="393.6953" y2="393.6953" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="402.5" y="388.8389">Send email alert (and update CarePlans on PAS)</text><polygon fill="#181818" points="1001,420.0469,1011,424.0469,1001,428.0469,1005,424.0469" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="734.5" x2="1007" y1="424.0469" y2="424.0469" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="741.5" y="419.1904">Alert Social Services of Patient Encounter</text></g></svg></figure>
<p><br clear="all" /></p>

<p>With this proposal this interaction would change to the following:</p>

<figure><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="540px" preserveAspectRatio="none" style="width:1135px;height:540px;background:#FFFFFF;" version="1.1" viewBox="0 0 1135 540" width="1135px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="290" x="424" y="29.5332">Patient Encounter Management with CPIS</text><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="427" x="285" y="187.8828" /><rect fill="none" height="218.8125" style="stroke:#000000;stroke-width:1.5;" width="854" x="275" y="297.2891" /><rect fill="none" height="156.1094" style="stroke:#000000;stroke-width:1.5;" width="834" x="285" y="352.9922" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="145" x2="145" y1="93.8281" y2="533.1016" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="395" x2="395" y1="93.8281" y2="533.1016" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604" x2="604" y1="93.8281" y2="533.1016" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="734" x2="734" y1="93.8281" y2="533.1016" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="837" x2="837" y1="93.8281" y2="533.1016" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1013" x2="1013" y1="93.8281" y2="533.1016" /><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="5" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="62" y="65.1426">Patient Encounter Source</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="12" y="82.752">(e.g. Patient Administration System (PAS))</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="295" y="43.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="302" y="65.1426">Trust Integration Engine (TIE)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="320" y="82.752">or Orchestration Engine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="506" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="513" y="82.752">Patient Encounter Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="712" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="719" y="82.752">CPIS</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="767" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="774" y="82.752">CHFT Safeguarding</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="917" y="61.2188" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="924" y="82.752">Social Service Safeguarding</text><polygon fill="#181818" points="383.5,138.5313,393.5,142.5313,383.5,146.5313,387.5,142.5313" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="145" x2="389.5" y1="142.5313" y2="142.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="152" y="121.3232">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="156" y="137.6748">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="156,168.8828,146,172.8828,156,176.8828,152,172.8828" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="394.5" y1="172.8828" y2="172.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="162" y="168.0264">Acknowledgement</text><path d="M285,187.8828 L358,187.8828 L358,196.2344 L348,206.2344 L285,206.2344 L285,187.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="95.4063" style="stroke:#000000;stroke-width:1.5;" width="427" x="285" y="187.8828" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="300" y="202.3779">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105" x="373" y="201.3018">[for each recipient]</text><polygon fill="#181818" points="592,240.9375,602,244.9375,592,248.9375,596,244.9375" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="598" y1="244.9375" y2="244.9375" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="402.5" y="223.7295">Patient Encounter Feed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="406.5" y="240.0811">IHE PEM / HL7 v2 ADT</text><polygon fill="#181818" points="406.5,271.2891,396.5,275.2891,406.5,279.2891,402.5,275.2891" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="400.5" x2="603" y1="275.2891" y2="275.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="412.5" y="270.4326">Acknowledgement</text><path d="M275,297.2891 L336,297.2891 L336,305.6406 L326,315.6406 L275,315.6406 L275,297.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="218.8125" style="stroke:#000000;stroke-width:1.5;" width="854" x="275" y="297.2891" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="290" y="311.7842">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="351" y="310.708">[Check CPIS]</text><polygon fill="#181818" points="722.5,333.9922,732.5,337.9922,722.5,341.9922,726.5,337.9922" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="728.5" y1="337.9922" y2="337.9922" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="402.5" y="333.1357">Check CPIS</text><path d="M285,352.9922 L346,352.9922 L346,361.3438 L336,371.3438 L285,371.3438 L285,352.9922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;" /><rect fill="none" height="156.1094" style="stroke:#000000;stroke-width:1.5;" width="834" x="285" y="352.9922" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="300" y="367.4873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118" x="361" y="366.4111">[if CPIS record found]</text><polygon fill="#181818" points="825,389.6953,835,393.6953,825,397.6953,829,393.6953" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="831" y1="393.6953" y2="393.6953" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="402.5" y="388.8389">Send email alert (and update CarePlans on PAS)</text><polygon fill="#181818" points="1001,420.0469,1011,424.0469,1001,428.0469,1005,424.0469" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="734.5" x2="1007" y1="424.0469" y2="424.0469" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="741.5" y="419.1904">Alert Social Services of Patient Encounter</text><polygon fill="#181818" points="1001,466.75,1011,470.75,1001,474.75,1005,470.75" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="1007" y1="470.75" y2="470.75" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="402.5" y="449.542">Patient Encounter Feed HL7 FHIR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="406.5" y="465.8936">POST /Encounter</text><polygon fill="#181818" points="406.5,497.1016,396.5,501.1016,406.5,505.1016,402.5,501.1016" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="400.5" x2="1012" y1="501.1016" y2="501.1016" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="412.5" y="496.2451">Acknowledgement</text></g></svg></figure>
<p><br clear="all" /></p>

<p>The previous implementation is mostly unchanged, but it is joined by the <strong>Patient Encounter Management</strong> notification which goes to Social Services Safeguarding. This includes more encounter metadata:</p>

<ul>
  <li>type of encounter</li>
  <li>encounter service code</li>
  <li>encounter reason (optional)</li>
  <li>encounter identifier which can be used to query encounter documents via Connection Care Records</li>
  <li>encounter participants</li>
</ul>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2024+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.england.nhs.uk/">NHS England</a>.  Package uk.nhs.england.administration#0.0.1 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Mon, Apr 15, 2024 10:54+0100">2024-04-15</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
            <div style="color: #333333" >

          Links: <a style="color: #81BEF7" href="toc.html">Table of Contents</a> |
                 <a style="color: #81BEF7" href="qa.html">QA Report</a> 
                 <a style="color: #81BEF7" rel="license" href="http://hl7.org/fhir/R4/license.html"><img style="border-style: none;" alt="CC0" src="cc0.png"/></a>
<div>
</div>

</div>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

